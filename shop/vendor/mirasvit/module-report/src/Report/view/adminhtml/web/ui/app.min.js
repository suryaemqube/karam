(()=>{var e,t={6700:(e,t,s)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-ps":315,"./ar-ps.js":315,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":4415,"./fy.js":4415,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":8311,"./jv.js":8311,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku-kmr":563,"./ku-kmr.js":563,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function a(e){var t=r(e);return s(t)}function r(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id=6700},9617:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 13h16v2H0zM1 0h4v2H1zm0 3h4v9.001H1zm5-3h4v9.001H6zm0 10.003h4v2H6zm4.984-2.002h4v4h-4zm0-8.001h4v7h-4z"></path></svg>'},6117:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 24 24"><path d="M15,19.88C15.04,20.18 14.94,20.5 14.71,20.71C14.32,21.1 13.69,21.1 13.3,20.71L9.29,16.7C9.06,16.47 8.96,16.16 9,15.87V10.75L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L15,10.75V19.88M7.04,5L11,10.06V15.58L13,17.58V10.05L16.96,5H7.04Z"></path></svg>'},2730:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},6041:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg>'},5551:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"></path></svg>'},5083:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path clip-rule="evenodd" fill="none" d="M0 0h24v24H0z"></path><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"></path></svg>'},9530:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},7742:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg>'},7833:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},727:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},6713:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg>'},9510:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},4294:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg>'},2096:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>'},6482:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},4114:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},4313:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></svg>'},6967:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path></svg>'},6766:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14zm-4.2-5.78v1.75l3.2-2.99L12.8 9v1.7c-3.11.43-4.35 2.56-4.8 4.7 1.11-1.5 2.58-2.18 4.8-2.18z"></path></svg>'},2318:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},2132:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},4494:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 6.92l-1.41-1.41-2.85 3.21C15.68 6.4 12.83 5 9.61 5 6.72 5 4.07 6.16 2 8l1.42 1.42C5.12 7.93 7.27 7 9.61 7c2.74 0 5.09 1.26 6.77 3.24l-2.88 3.24-4-4L2 16.99l1.5 1.5 6-6.01 4 4 4.05-4.55c.75 1.35 1.25 2.9 1.44 4.55H21c-.22-2.3-.95-4.39-2.04-6.14L22 6.92z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg>'},8989:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-5 0h-2v-2h2v2zm0-4h-2V8h2v4zm-1 10c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg>'},3417:e=>{e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"></path></svg>'},7734:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z"></path></svg>'},1061:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},3312:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></svg>'},5268:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="none" d="M0 0h20v20H0V0z"></path><path d="M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"></path></svg>'},4992:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},1460:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"></path><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></svg>'},3254:(e,t,s)=>{"use strict";var n=s(7294),a=s(745);var r=s(7974),o=s(8838),i=s(6486),l=s.n(i),c=s(9755),h=s.n(c);const p=new class{getDashboardDataProvider(){const e=window,t="dashboardDataProvider";return e[t]?e[t]:{}}isMobileDashboard(){return h()("body").hasClass("dashboard-dashboard-mobile")}getSchemaDataProvider(){const e=window,t="schemaDataProvider";return e[t]?e[t]:{}}getConfigDataProvider(){const e=window,t="configDataProvider";return e[t]?e[t]:{}}getReportDataProvider(){const e=window,t="reportDataProvider";return e[t]?e[t]:{}}get(e){const t=window;return!!t[e=`REPORT_${e}`]&&t[e]}},d=new class{constructor(){this.getColumn=e=>{let t=p.getSchemaDataProvider().columns[e];return t||(t={label:"",identifier:e,internal:!1,table:"",type:"str",filterType:"text",aggregator:"none",options:[]}),t},this.getTable=e=>p.getSchemaDataProvider().tables[e]||null,this.tables=()=>p.getSchemaDataProvider().tables,this.columns=()=>p.getSchemaDataProvider().columns,this.idToList=e=>l().map(e,(e=>this.getColumn(e))),this.tableColumns=e=>{const t=[];return l().each(p.getSchemaDataProvider().columns,(s=>{s.table==e.identifier&&t.push(s)})),t},this.getColumns=e=>{let t=[];return e?l().each(p.getSchemaDataProvider().columns,(s=>{let n=!0;n&&void 0!==e.isNumeric&&-1===l().indexOf(["pk","fk","money","qty","number","percent"],s.type)&&(n=!e.isNumeric),n&&void 0!==e.isAggregated&&-1===l().indexOf(["avg","sum","cnt","contact"],s.aggregator)&&(n=!e.isAggregated),n&&!0===e.isInternal&&!s.internal&&(n=!1),n&&!1===e.isInternal&&s.internal&&(n=!1),n&&e.table&&e.table==s.table&&(n=!0),n&&t.push(s.identifier)})):t=l().keys(p.getSchemaDataProvider().columns),t},this.isChartableColumn=e=>{const t=this.getColumn(e);return-1!==l().indexOf(["money","number","pk","fk","percent"],t.type)},this.ToggleColumn=(e,t)=>l().find(e,(e=>e.identifier===t.identifier))?l().filter(e,(e=>e.identifier!==t.identifier)):(e.push(t),e)}};var u=s(4286);const m=new class{constructor(){this.toMysqlFormat=(e,t)=>(0,u.WU)(e,"YYYY-MM-DD")+(t?" 23:59:59":" 00:00:00")}},g=new class{constructor(){this.typeLabel=e=>{switch(e.type){case"number":return"#.##";case"money":return"$.$$";case"str":case"select":case"country":case"store":return"ABC";case"percent":return"%.%%";case"pk":return"KEY";default:return e.type}},this.aggregatorLabel=e=>{switch(e.aggregator){case"none":return"VALUE";case"cnt":return"COUNT";case"concat":return"JOIN";default:return e.aggregator}},this.isNumerable=e=>"money"===e.type||"number"==e.type||"pk"===e.type||"fk"===e.type||"qty"===e.type||"sum"===e.aggregator||"cnt"===e.aggregator||"avg"===e.aggregator}};var b=s(9669);const C=s.n(b)().create({timeout:6e4,withCredentials:!1});var v=s(5745);const f="UPDATE_REPORT",y="UPDATE_STATE",E="UPDATE_SCHEMA",S="LOAD_CONFIG",D="LOAD_RESULTS_REQUEST",k="LOAD_RESULTS_SUCCESS",w="LOAD_RESULTS_FAILURE",x={loadConfig:(0,v.P)(S,(e=>({type:S,payload:e}))),updateReport:(0,v.P)(f,(e=>({type:f,payload:e}))),updateState:(0,v.P)(y,(e=>({type:y,payload:e}))),updateSchema:(0,v.P)(E,(e=>({type:E,payload:e}))),loadResults:(0,v.P)(D,(()=>({type:D}))),loadResultsSuccess:(0,v.P)(k,(e=>({type:k,payload:e}))),loadResultsFailure:(0,v.P)(w,(e=>({type:w,payload:e}))),request:()=>{ne.dispatch(x.loadResults()),M()},requestNow:()=>(e,t)=>{return s=void 0,n=void 0,r=function*(){const{report:s}=t().reportState,n={identifier:s.identifier,table:s.state.table,dimensions:s.state.dimensions,columns:l().union(s.state.dimensions,s.state.columns,s.schema.internalColumns),filters:l().union(s.state.filters,s.schema.internalFilters),sortOrders:s.state.sortOrders,currentPage:s.state.currentPage,pageSize:s.state.pageSize};try{const t=(yield(e=>C.post(p.getReportDataProvider().requestUrl,e))(n)).data;t.success&&t.data?e(x.loadResultsSuccess(t.data)):t.message&&e(x.loadResultsFailure(t.message))}catch(t){const s=t,n=s.response;let a="";n&&(a=n.data);const r=a||s.message;e(x.loadResultsFailure(r))}},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{l(r.next(e))}catch(e){t(e)}}function i(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof a?s:new a((function(e){e(s)}))).then(o,i)}l((r=r.apply(s,n||[])).next())}));var s,n,a,r}},M=l().debounce((()=>{ne.dispatch(x.requestNow())}),50);const R=()=>(e,t)=>{return s=void 0,n=void 0,r=function*(){const{report:e}=t().reportState;try{yield(s=e.state,C.post(p.getReportDataProvider().stateUrl,s))}catch(e){const t=e,s=t.response;let n="";s&&(n=s.data);const a=n||t.message;console.error(a)}var s},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{l(r.next(e))}catch(e){t(e)}}function i(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof a?s:new a((function(e){e(s)}))).then(o,i)}l((r=r.apply(s,n||[])).next())}));var s,n,a,r},z=(l().debounce((()=>{ne.dispatch(R())}),50),"SET_ACTIVE"),P={setActive:(0,v.P)(z,(e=>({type:z,payload:e})))},j="SET_BOARDS",T="UPDATE_LOCK",O="SELECT_BOARD",A="UPDATE_BOARD",L="ADD_BOARD",B="EDIT_BOARD",N="BLOCK_LIBRARY_OPEN",F="BLOCK_LIBRARY_CLOSE",_="SET_FILTERS",H="BOARD_SYNC",I={setBoards:(0,v.P)(j,(e=>({type:j,payload:e}))),updateLock:(0,v.P)(T,(e=>({type:T,payload:e}))),selectBoard:(0,v.P)(O,(e=>({type:O,payload:e}))),addBoard:(0,v.P)(L,(e=>({type:L,payload:e}))),editBoard:(0,v.P)(B,(e=>({type:B,payload:e}))),updateBoard:(0,v.P)(A,(e=>({type:A,payload:e}))),blockLibraryOpen:(0,v.P)(N,(()=>({type:N}))),blockLibraryClose:(0,v.P)(F,(()=>({type:F}))),setFilters:(0,v.P)(_,(e=>({type:_,payload:e}))),syncBoard:(0,v.P)(H,(()=>({type:H,payload:null}))),nope:()=>"nope"},W="PUSH_MESSAGE",V={pushMessage:(0,v.P)(W,(e=>({type:W,payload:e})))};[...Object.values(x),...Object.values(P),...Object.values(I),...Object.values(V)].map(o.M);var K=s(1438),q=s(9177);const U={identifier:"",name:"",state:{identifier:"",table:"",columns:[],dimensions:[],filters:[],sortOrders:[],currentPage:0,pageSize:0,chartType:null,chartColumns:[],timeRange:"month"},schema:{primaryFilters:[],primaryDimensions:[],applicableDimensions:[],applicableColumns:[],internalColumns:[],internalFilters:[]},isShareEnabled:!1,shareIdentifier:"",isCustomized:!1},Y=(0,K.UY)({report:(e=U,t)=>{switch(t.type){case(0,q.o)(x.loadConfig):return t.payload;case(0,q.o)(x.updateReport):return Object.assign(Object.assign({},e),t.payload);case(0,q.o)(x.updateState):return Object.assign(Object.assign({},e),{state:Object.assign(Object.assign({},e.state),t.payload)});case(0,q.o)(x.updateSchema):return Object.assign(Object.assign({},e),{schema:Object.assign(Object.assign({},e.schema),t.payload)});default:return e}},response:(e=null,t)=>t.type===(0,q.o)(x.loadResultsSuccess)?t.payload:e,error:(e="",t)=>{switch(t.type){case(0,q.o)(x.loadResultsSuccess):return"";case(0,q.o)(x.loadResultsFailure):return t.payload;default:return e}},isLoading:(e=!1,t)=>{switch(t.type){case(0,q.o)(x.loadResults):return!0;case(0,q.o)(x.loadResultsSuccess):case(0,q.o)(x.loadResultsFailure):return!1;default:return e}}}),G=(Object.values(x).map(o.M),(0,K.UY)({active:(e=!1,t)=>t.type===(0,q.o)(P.setActive)?t.payload:e}));Object.values(P).map(o.M);const J=new class{getUniqueIdentifier(){let e="";for(let t=0;t<16;t++)e+="abcdef0123456789".charAt(Math.floor(16*Math.random()));return e}stabilizeBoard(e){e=l().merge(this.getEmptyBoard(),e);const t=this.getEmtpyBlock();return e.blocks=l().map(e.blocks,(e=>Object.assign(Object.assign(Object.assign({},t),e),{config:Object.assign(Object.assign({},t.config),e.config)}))),e}getEmptyBoard(){return{identifier:this.getUniqueIdentifier(),type:"private",title:"Untitled Board",isDefault:!1,isMobileEnabled:!1,mobileToken:this.getUniqueIdentifier(),blocks:[],timeRange:"month"}}getEmtpyBlock(){return{identifier:this.getUniqueIdentifier(),pos:[0,0],size:[5,10],title:"Untitled Block",description:"",_refresh:"",config:{renderer:"single",filters:[],single:{column:"",sparkLine:!1,compare:""},table:{columns:[],dimensions:[],sortOrders:[],pageSize:30,baseTable:""},chart:{dimension:"",columns:[],compare:""},html:{content:""},dateRange:{override:!1,range:""}}}}getMobileUrl(e){return p.getDashboardDataProvider().endpoint+"dashboard/mobile/token/"+e.mobileToken}},$=(0,K.UY)({boards:(e=[],t)=>{switch(t.type){case(0,q.o)(I.setBoards):return t.payload;case(0,q.o)(I.updateBoard):{const e=ne.getState().dashboardState,s=l().clone(e.boards),n=l().findIndex(s,{identifier:e.identifier});return s.splice(n,1,Object.assign(Object.assign({},s[n]),t.payload)),s}case(0,q.o)(I.addBoard):{const e=ne.getState().dashboardState,s=l().clone(e.boards);return s.push(t.payload),s}default:return e}},identifier:(e="",t)=>t.type===(0,q.o)(I.selectBoard)?t.payload:e,_board:(e=J.getEmptyBoard(),t)=>{switch(t.type){case(0,q.o)(I.selectBoard):{const e=ne.getState().dashboardState;let s=l().find(e.boards,{identifier:t.payload});return s=s?l().cloneDeep(s):J.getEmptyBoard(),J.stabilizeBoard(s)}case(0,q.o)(I.syncBoard):{const e=ne.getState().dashboardState;return J.stabilizeBoard(l().cloneDeep(e.board))}default:return e}},board:(e=J.getEmptyBoard(),t)=>{switch(t.type){case(0,q.o)(I.selectBoard):const s=ne.getState().dashboardState;let n=l().find(s.boards,{identifier:t.payload});return n=n||J.getEmptyBoard(),J.stabilizeBoard(n);case(0,q.o)(I.updateBoard):return J.stabilizeBoard(Object.assign(Object.assign({},e),t.payload));default:return e}},editableIdentifier:(e=!1,t)=>t.type===(0,q.o)(I.editBoard)?t.payload:e,locked:(e=!0,t)=>{switch(t.type){case(0,q.o)(I.updateLock):return t.payload;case(0,q.o)(I.selectBoard):return!0;case(0,q.o)(I.editBoard):return!1===t.payload&&e;default:return e}},blockLibrary:(e=!1,t)=>{switch(t.type){case(0,q.o)(I.blockLibraryOpen):return!0;case(0,q.o)(I.blockLibraryClose):return!1;default:return e}},filters:(e=[],t)=>t.type===(0,q.o)(I.setFilters)?t.payload:e}),X=(Object.values(I).map(o.M),(0,K.UY)({messages:(e=[],t)=>{if(t.type===(0,q.o)(V.pushMessage)){const s=t.payload;let n=l().cloneDeep(e);return n=l().reject(n,{id:s.id}),n.push(s),n}return e}})),Z=(Object.values(V).map(o.M),(0,K.UY)({mainState:X,reportState:Y,builderState:G,dashboardState:$}));var Q=s(2426),ee=s(4500),te=s.n(ee),se=s(3894);(0,Q.lX)();const ne=function(e){const t=[se.Z,te()],s=(0,K.qC)((0,K.md)(...t));return(0,K.MT)(Z,void 0,s)}(),ae={SpinnerBg:"styles-SpinnerBg_3CQ_7",spinnerBg:"styles-SpinnerBg_3CQ_7"};var re=s(4184),oe=s.n(re);const ie={Day:"dayCell-Day_1Z54G",day:"dayCell-Day_1Z54G",DayNumber:"dayCell-DayNumber_4HTMq",dayNumber:"dayCell-DayNumber_4HTMq",DayDisabled:"dayCell-DayDisabled_2SZrI",dayDisabled:"dayCell-DayDisabled_2SZrI",DayWeekend:"dayCell-DayWeekend_1acov",dayWeekend:"dayCell-DayWeekend_1acov",DayPassive:"dayCell-DayPassive_345Rp",dayPassive:"dayCell-DayPassive_345Rp",Selection:"dayCell-Selection_3504Z",selection:"dayCell-Selection_3504Z",End:"dayCell-End_29jCQ",end:"dayCell-End_29jCQ",In:"dayCell-In_dlqwb",in:"dayCell-In_dlqwb",Start:"dayCell-Start_2-YGA",start:"dayCell-Start_2-YGA",Preview:"dayCell-Preview_1Rhia",preview:"dayCell-Preview_1Rhia"};class le extends n.Component{constructor(e,t){super(e,t),this.state={hover:!1,active:!1},this.renderSelectionPlaceholders=()=>{const{ranges:e,day:t}=this.props;if("date"===this.props.displayMode&&this.props.date)return(0,u.KC)(this.props.day,this.props.date)?n.createElement("span",{className:ie.Selected,style:{color:this.props.color}}):null;const s=l().reduce(e,((e,s)=>{let n=s.startDate,a=s.endDate;n&&a&&(0,u.RR)(a,n)&&([n,a]=[a,n]),n=n?(0,u.iX)(n):null,a=a?(0,u.b7)(a):null;const r=(!n||(0,u.Ax)(t,n))&&(!a||(0,u.RR)(t,a)),o=!r&&(0,u.KC)(t,n),i=!r&&(0,u.KC)(t,a);return r||o||i?[...e,Object.assign({isStartEdge:o,isEndEdge:i,isInRange:r},s)]:e}),[]);return l().map(s,((e,t)=>{const s=oe()(ie.Selection,{[ie.Start]:e.isStartEdge,[ie.In]:e.isInRange,[ie.End]:e.isEndEdge});return n.createElement("span",{key:t,className:s,style:{color:e.color||this.props.color}})}))},this.renderPreviewPlaceholder=()=>{const{preview:e,day:t}=this.props;if(!e)return null;const s=e.startDate?(0,u.iX)(e.startDate):null,a=e.endDate?(0,u.b7)(e.endDate):null,r=(!s||(0,u.Ax)(t,s))&&(!a||(0,u.RR)(t,a)),o=!r&&(0,u.KC)(t,s),i=!r&&(0,u.KC)(t,a),l=oe()(ie.Preview,{[ie.Start]:o,[ie.In]:r,[ie.End]:i});return n.createElement("span",{className:l,style:{color:e.color}})},this.handleMouseEvent=this.handleMouseEvent.bind(this),this.handleKeyEvent=this.handleKeyEvent.bind(this)}handleKeyEvent(e){const{day:t}=this.props;switch(e.keyCode){case 13:case 32:"keydown"===e.type?this.props.onMouseDown(t):this.props.onMouseUp(t)}}handleMouseEvent(e){const{day:t,disabled:s,onPreviewChange:n}=this.props,a={};if(s)n&&n(null);else{switch(e.type){case"mouseenter":this.props.onMouseEnter(t),n&&n(t),a.hover=!0;break;case"blur":case"mouseleave":a.hover=!1;break;case"mousedown":a.active=!0,this.props.onMouseDown(t);break;case"mouseup":e.stopPropagation(),a.active=!1,this.props.onMouseUp(t);break;case"focus":n&&n(t)}Object.keys(a).length&&this.setState(a)}}render(){const{isPassive:e,isToday:t,isWeekend:s,isStartOfWeek:a,isEndOfWeek:r,isStartOfMonth:o,isEndOfMonth:i,disabled:l}=this.props,c=oe()(ie.Day,{[ie.DayPassive]:e,[ie.DayDisabled]:l,[ie.DayToday]:t,[ie.DayWeekend]:s,[ie.DayStartOfWeek]:a,[ie.DayEndOfWeek]:r,[ie.DayStartOfMonth]:o,[ie.DayEndOfMonth]:i,[ie.DayHovered]:this.state.hover,[ie.DayActive]:this.state.active});return n.createElement("button",Object.assign({type:"button",onMouseEnter:this.handleMouseEvent,onMouseLeave:this.handleMouseEvent,onFocus:this.handleMouseEvent,onMouseDown:this.handleMouseEvent,onMouseUp:this.handleMouseEvent,onBlur:this.handleMouseEvent,onPauseCapture:this.handleMouseEvent,onKeyDown:this.handleKeyEvent,onKeyUp:this.handleKeyEvent,className:c},this.props.disabled||this.props.isPassive?{tabIndex:-1}:{},{style:{color:this.props.color}}),this.renderSelectionPlaceholders(),this.renderPreviewPlaceholder(),n.createElement("span",{className:ie.DayNumber},n.createElement("span",null,(0,u.WU)(this.props.day,"D"))))}}function ce(e,t){const{shownDate:s,date:n,months:a,ranges:r,focusedRange:o,displayMode:i}=t;let l;if("dateRange"===i){const e=r[o[0]]||{};l={start:e.startDate,end:e.endDate}}else l={start:n,end:n};l.start=(0,u.Nm)(l.start||new Date),l.end=(0,u.Vf)(l.end||l.start);const c=l.start||l.end||s||new Date;if(!e)return s||c;const h={start:(0,u.Nm)(e),end:(0,u.Vf)((0,u.zI)(e,a-1))};return(0,u.i9)(l,h)?e:c}function he(e,t=-1){const s=e.findIndex(((e,s)=>s>t&&!1!==e.autoFocus&&!e.disabled));return-1!==s?s:e.findIndex((e=>!1!==e.autoFocus&&!e.disabled))}class pe extends n.PureComponent{constructor(){super(...arguments),this.renderMonthName=()=>this.props.showMonthName?n.createElement("div",{className:"month-MonthName_2CZGC"},(0,u.WU)(this.props.month,this.props.monthDisplayFormat,this.props.dateOptions)):null,this.renderWeekdays=()=>{if(!this.props.showWeekDays)return null;const e=new Date,t=this.props.dateOptions,s=(0,u.Dy)({start:(0,u.zJ)(e,t),end:(0,u.vV)(e,t)}).map(((e,s)=>n.createElement("span",{className:"month-WeekDay_1T55d",key:s},(0,u.WU)(e,"dd",t))));return n.createElement("div",{className:"month-WeekDays_19sWB"},s)}}render(){const e=new Date,{displayMode:t,focusedRange:s,drag:a,disabledDates:r}=this.props,o=this.props.minDate&&(0,u.b7)(this.props.minDate),i=this.props.maxDate&&(0,u.iX)(this.props.maxDate),l=function(e,t){const s=(0,u.Nm)(e,t),n=(0,u.Vf)(e,t);return{start:(0,u.zJ)(s,t),end:(0,u.vV)(n,t),startDateOfMonth:s,endDateOfMonth:n}}(this.props.month,this.props.dateOptions);let c=this.props.ranges;if("dateRange"===t&&a.status){let{startDate:e,endDate:t}=a.range;c=c.map(((n,a)=>a!==s[0]?n:Object.assign(Object.assign({},n),{startDate:e,endDate:t})))}const h=this.props.showPreview&&!a.disablePreview,p=(0,u.Dy)({start:l.start,end:l.end}).map(((t,s)=>{const a=(0,u.KC)(t,l.startDateOfMonth),p=(0,u.KC)(t,l.endDateOfMonth),d=o&&(0,u.RR)(t,o)||i&&(0,u.Ax)(t,i),m=r.some((e=>(0,u.KC)(e,t))),g=le;return n.createElement(g,Object.assign({},this.props,{displayMode:this.props.displayMode,key:s,ranges:c,day:t,preview:h?this.props.preview:null,isWeekend:(0,u.QD)(t,this.props.dateOptions),isToday:(0,u.KC)(t,e),isStartOfWeek:(0,u.KC)(t,(0,u.zJ)(t,this.props.dateOptions)),isEndOfWeek:(0,u.KC)(t,(0,u.vV)(t,this.props.dateOptions)),isStartOfMonth:a,isEndOfMonth:p,disabled:d||m,isPassive:!(0,u._w)(t,{start:l.startDateOfMonth,end:l.endDateOfMonth}),onMouseDown:this.props.onDragSelectionStart,onMouseUp:this.props.onDragSelectionEnd,onMouseEnter:this.props.onDragSelectionMove}))}));return n.createElement("div",{className:"month-Month_29hkZ"},this.renderMonthName(),this.renderWeekdays(),n.createElement("div",{className:"month-Days_3XJ1w",onMouseLeave:this.props.onMouseLeave},p))}}var de=s(5489),ue=s(3378),me=s(6711);class ge extends n.Component{shouldComponentUpdate(e){return!(this.props.focusedDate===e.focusedDate)}render(){const{showMonthArrow:e,locale:t,minDate:s,maxDate:a,focusedDate:r}=this.props,o=e?n.createElement(Ie.z,{icon:ue.S,size:"slim",plain:!0,onClick:()=>this.props.onChangeDate(-1,"monthOffset")}):null,i=e?n.createElement(Ie.z,{icon:me.S,size:"slim",plain:!0,onClick:()=>this.props.onChangeDate(1,"monthOffset")}):null,c=l().map(t.localize.months(),((e,t)=>({label:e,value:String(t)}))),h=l().range(s.getFullYear()+1,a.getFullYear()),p=l().map(h,(e=>({label:String(e),value:String(e)})));return n.createElement(Be.D,{alignment:"center"},o,n.createElement(Be.D.Item,{fill:!0},n.createElement(Be.D,{distribution:"center"},n.createElement(de.P,{label:"",value:r.getMonth().toString(),options:c,onChange:e=>this.props.onChangeDate(e,"setMonth")}),n.createElement(de.P,{label:"",value:r.getFullYear().toString(),options:p,onChange:e=>this.props.onChangeDate(e,"setYear")}))),i)}}class be extends n.PureComponent{constructor(e){super(e),this.onMouseLeave=()=>{this.props.onPreviewChange(null)},this.changeShownDate=this.changeShownDate.bind(this),this.focusToDate=this.focusToDate.bind(this),this.updateShownDate=this.updateShownDate.bind(this),this.onDragSelectionStart=this.onDragSelectionStart.bind(this),this.onDragSelectionEnd=this.onDragSelectionEnd.bind(this),this.onDragSelectionMove=this.onDragSelectionMove.bind(this),this.updatePreview=this.updatePreview.bind(this),this.dateOptions={locale:e.locale},this.state={focusedDate:ce(null,e),drag:{status:!1,range:{startDate:null,endDate:null},disablePreview:!1},preview:null}}focusToDate(e){this.setState({focusedDate:e})}updateShownDate(e=this.props){const t=ce(this.state.focusedDate,e);this.focusToDate(t)}updatePreview(e){if(!e)return void this.setState({preview:null});const t={startDate:e,endDate:e,color:this.props.color};this.setState({preview:t})}componentWillReceiveProps(e){const t={dateRange:"ranges",date:"date"}[e.displayMode];this.props.locale!==e.locale&&(this.dateOptions={locale:e.locale}),e[t]!==this.props[t]&&this.updateShownDate(e)}changeShownDate(e,t="set"){const{focusedDate:s}=this.state,{onShownDateChange:n,minDate:a,maxDate:r}=this.props,o={monthOffset:()=>(0,u.zI)(s,e),setMonth:()=>(0,u.q0)(s,e),setYear:()=>(0,u.Mq)(s,e),set:()=>e},i=(0,u.VV)([(0,u.Fp)([o[t](),a]),r]);this.focusToDate(i),n&&n(i)}onDragSelectionStart(e){const{onChangeDate:t,dragSelectionEnabled:s}=this.props;s?this.setState({drag:{status:!0,range:{startDate:e,endDate:e},disablePreview:!0}}):t&&t(e)}onDragSelectionEnd(e){const{updateRange:t,displayMode:s,onChangeDate:n,dragSelectionEnabled:a}=this.props;if(!a)return;if("date"===s||!this.state.drag.status)return void(n&&n(e));const r={startDate:this.state.drag.range.startDate,endDate:e};"dateRange"!==s||(0,u.KC)(r.startDate,e)?this.setState({drag:{status:!1,range:{}}},(()=>n&&n(e))):this.setState({drag:{status:!1,range:{}}},(()=>{t&&t(r)}))}onDragSelectionMove(e){const{drag:t}=this.state;t.status&&this.props.dragSelectionEnabled&&this.setState({drag:{status:t.status,range:{startDate:t.range.startDate,endDate:e},disablePreview:!0}})}formatDateDisplay(e,t){return e?(0,u.WU)(e,this.props.dateDisplayFormat,this.dateOptions):t}render(){const{disabledDates:e,rangeColors:t,color:s}=this.props,{focusedDate:a}=this.state,r=this.props.ranges.map(((e,n)=>Object.assign(Object.assign({},e),{color:e.color||t[n]||s}))),o=new Array(this.props.months).fill(null).map(((t,s)=>{const a=(0,u.zI)(this.state.focusedDate,s);return n.createElement(pe,Object.assign({},this.props,{preview:this.props.preview||this.state.preview,ranges:r,key:s,drag:this.state.drag,dateOptions:this.dateOptions,disabledDates:e,month:a,onDragSelectionStart:this.onDragSelectionStart,onDragSelectionEnd:this.onDragSelectionEnd,onDragSelectionMove:this.onDragSelectionMove,onMouseLeave:this.onMouseLeave,showWeekDays:!0,showMonthName:!0}))}));return n.createElement("div",{className:oe()("calendar-CalendarWrapper_2I00L",this.props.className),onMouseUp:()=>this.setState({drag:{status:!1,range:{}}}),onMouseLeave:()=>{this.setState({drag:{status:!1,range:{}}})}},n.createElement(Be.D,{vertical:!0},n.createElement(ge,{locale:this.props.locale,maxDate:this.props.maxDate,minDate:this.props.minDate,showMonthArrow:this.props.showMonthArrow,focusedDate:a,onChangeDate:this.changeShownDate}),n.createElement(Be.D,{spacing:"tight",distribution:"equalSpacing"},o)))}}class Ce extends n.Component{constructor(e){super(e),this.onPreviewChange=e=>{this.updatePreview(e?this.calcNewSelection(e).range:null)},this.updatePreview=e=>{if(!e)return void this.setState({preview:null});const{rangeColors:t,ranges:s}=this.props,n=this.props.focusedRange||this.state.focusedRange,a=s[n[0]].color||t[n[0]];this.setState({preview:Object.assign(Object.assign({},e),{color:a})})},this.setSelection=this.setSelection.bind(this),this.handleRangeFocusChange=this.handleRangeFocusChange.bind(this),this.updatePreview=this.updatePreview.bind(this),this.calcNewSelection=this.calcNewSelection.bind(this),this.state={focusedRange:e.initialFocusedRange||[he(e.ranges),0],preview:null}}calcNewSelection(e,t=!0){const s=this.props.focusedRange||this.state.focusedRange,{ranges:n,onChangeRange:a,maxDate:r,moveRangeOnFirstSelection:o,disabledDates:i}=this.props,l=n[s[0]];if(!l||!a)return{};let c,{startDate:h,endDate:p}=l;if(p||(p=new Date(h)),t)if(0===s[1]){const t=(0,u.wY)(p,h);h=e,p=o?(0,u.E4)(e,t):e,r&&(p=(0,u.VV)([p,r])),c=[s[0],1]}else p=e;else h=e.startDate,p=e.endDate;let d=0===s[1];(0,u.RR)(p,h)&&(d=!d,[h,p]=[p,h]);const m=i.filter((e=>(0,u._w)(e,{start:h,end:p})));return m.length>0&&(d?h=(0,u.E4)((0,u.Fp)(m),1):p=(0,u.E4)((0,u.VV)(m),-1)),c||(c=[he(this.props.ranges,s[0]),0]),{wasValid:!(m.length>0),range:{startDate:h,endDate:p},nextFocusRange:c}}setSelection(e,t=!0){const{onChangeRange:s,ranges:n,onRangeFocusChange:a}=this.props,r=(this.props.focusedRange||this.state.focusedRange)[0],o=n[r];if(!o)return;const i=this.calcNewSelection(e,t);s(Object.assign(Object.assign({},o),i.range),o.key||`range${r+1}`),this.setState({focusedRange:i.nextFocusRange,preview:null}),a&&a(i.nextFocusRange)}handleRangeFocusChange(e){this.setState({focusedRange:e}),this.props.onRangeFocusChange&&this.props.onRangeFocusChange(e)}render(){return n.createElement(be,Object.assign({onRangeFocusChange:this.handleRangeFocusChange,preview:this.state.preview,onPreviewChange:this.onPreviewChange},this.props,{displayMode:"dateRange",onChangeDate:this.setSelection,updateRange:e=>this.setSelection(e,!1),onShownDateChange:()=>{},dragSelectionEnabled:!0}))}}Ce.defaultProps={ranges:[],moveRangeOnFirstSelection:!1,rangeColors:["#3d91ff","#3ecf8e","#fed14c"],disabledDates:[]};const ve=Ce;var fe=s(2512),ye=s.n(fe);class Ee extends n.Component{constructor(){super(...arguments),this.onChange=e=>{const t=parseInt(e);if(-1==t)return;const s=this.props.staticRanges[t];this.props.onChange(s.range,"")}}render(){return this.renderSelect()}renderSelect(){const e=this.getSelectedDateRangeIndex();let t=[{value:"-1",label:"Custom"}],s=[];return l().each(this.props.staticRanges,((e,a)=>{s.push(n.createElement(Ie.z,null,e.label)),t.push({label:e.label,value:String(a)})})),n.createElement("div",null,n.createElement(de.P,{label:"",onChange:this.onChange,value:String(e),options:t}))}getSelectedDateRangeIndex(){return l().findIndex(this.props.staticRanges,(e=>l().findIndex(this.props.ranges,(t=>!(!t.startDate||!t.endDate||t.disabled)&&(0,u.KC)(t.startDate,e.range.startDate)&&(0,u.KC)(t.endDate,e.range.endDate)))>=0))}}const Se=[];function De(e){const t=e.split("UTC"),s=t[0].split("-"),n=s.shift();return s.push(n),s.join("/")+" "+t[1]}l().each(p.getConfigDataProvider().dateRange,((e,t)=>{const s=new Date(De(e.from)),n=new Date(De(e.to));Se.push({label:e.label,value:t,range:{startDate:u.b7(s),endDate:u.iX(n)}})}));var ke=s(4497);class we extends n.Component{handleRangeFocusChange(e,t){this.props.onRangeFocusChange([e,t])}render(){const{focusedRange:e}=this.props,t=l().map(this.props.ranges,((t,s)=>n.createElement("div",{key:s,className:"dateInputs-Wrapper_3n2Av"},n.createElement(Be.D,{alignment:"center",distribution:"equalSpacing"},n.createElement("span",{onFocus:()=>this.handleRangeFocusChange(s,0)},n.createElement(ke.n,{label:"",disabled:t.disabled,readOnly:!0,align:"center",focused:e[0]===s&&0===e[1],value:this.formatDateDisplay(t.startDate,"Early"),autoComplete:"off"})),n.createElement("span",null,"–"),n.createElement("span",{onFocus:()=>this.handleRangeFocusChange(s,1)},n.createElement(ke.n,{label:"",disabled:t.disabled,focused:e[0]===s&&1===e[1],readOnly:!0,align:"center",value:this.formatDateDisplay(t.endDate,"Early"),autoComplete:"off"}))))));return n.createElement("div",null,t)}formatDateDisplay(e,t){return e?(0,u.WU)(e,this.props.dateDisplayFormat):t}}class xe extends n.Component{constructor(e){super(e),this.dateRange=void 0,this.handleApply=()=>{this.props.onApply(this.state.ranges)},this.handleCancel=()=>{this.props.onCancel()},this.onChangeRange=e=>{const t=l().clone(this.state.ranges);e.startDate=(0,u.b7)(e.startDate),e.endDate=(0,u.iX)(e.endDate),t[0]=e,this.setState({ranges:t})},this.onRangeFocusChange=e=>{this.setState({focusedRange:e})},this.state={focusedRange:[he(e.ranges),0],ranges:e.ranges}}render(){const{focusedRange:e}=this.state;return n.createElement(Be.D,null,n.createElement(ve,{ref:e=>this.dateRange=e,onRangeFocusChange:this.onRangeFocusChange,focusedRange:e,months:this.props.months,onChangeRange:this.onChangeRange,className:"",ranges:this.state.ranges,showMonthArrow:!0,showMonthAndYearPickers:!0,disabledDates:[],locale:ye(),dateDisplayFormat:"MMM D, YYYY",monthDisplayFormat:"MMM YYYY",showDateDisplay:!0,showPreview:!0,displayMode:"date",color:"#FFEBA0",maxDate:(0,u.Bc)(new Date,20),minDate:(0,u.Bc)(new Date,-100),rangeColors:["#FFEBA0","#3ecf8e"],initialFocusedRange:e}),n.createElement(Be.D.Item,null,n.createElement(Be.D,{vertical:!0},n.createElement(Ee,{staticRanges:Se,ranges:this.state.ranges,onChange:this.onChangeRange}),n.createElement(we,{ranges:this.state.ranges,dateDisplayFormat:"MMM D, YYYY",focusedRange:e,onRangeFocusChange:this.onRangeFocusChange}),n.createElement(Be.D,{distribution:"trailing"},n.createElement(Ie.z,{onClick:this.handleCancel},"Cancel"),n.createElement(Ie.z,{primary:!0,onClick:this.handleApply},"Apply")))))}}const Me=xe;var Re=s(7757),ze=s.n(Re);const Pe={Tooltip:"tooltip-Tooltip_1lL29",tooltip:"tooltip-Tooltip_1lL29",Line:"tooltip-Line_2j34W",line:"tooltip-Line_2j34W",Point:"tooltip-Point_2eAE2",point:"tooltip-Point_2eAE2"};var je=s(3531);class Te extends n.PureComponent{render(){const{tooltip:e,chart:t}=this.props;if(!t||!t.canvas||!e)return null;const s=t.canvas.getBoundingClientRect();let a=s.left+window.pageXOffset+e.caretX,r={opacity:e.opacity,top:s.top+window.pageYOffset+e.caretY+"px",padding:e.yPadding+"px "+e.xPadding+"px"};a>window.innerWidth/2?r.right=window.innerWidth-a+"px":r.left=a+"px";let o=[];return e.body&&(o=e.body.map(((t,s)=>{let a=e.labelColors[s].borderColor;return n.createElement("div",{key:s,className:Pe.Line},n.createElement("div",{className:Pe.Point,style:{background:a}}),n.createElement("div",{className:Pe.Body},t.lines.join(" ")))}))),n.createElement(je.h,null,n.createElement("div",{style:r,className:Pe.Tooltip},n.createElement("strong",null,e.title),o))}}class Oe extends n.Component{constructor(){super(...arguments),this.state={chart:null,tooltip:null},this.canvas=void 0,this.removeTooltip=e=>{"CANVAS"!==e.target.nodeName&&this.state.tooltip&&this.setState({tooltip:null})},this.initChart=()=>{if(this.destroyChart(),!this.canvas)return;let e=this.canvas.getContext("2d");if(e){let t={title:{display:!1},legend:{display:!1},responsive:!0,maintainAspectRatio:!1,tooltips:{mode:"index",position:"nearest",enabled:!1,intersect:!1,custom:e=>{this.setState({tooltip:e})}},elements:{line:{tension:.2}}};"bar"!==this.props.type&&"line"!==this.props.type&&"stacked"!==this.props.type||(t.scales=this.getScales());let s=new(ze().Chart)(e,{type:this.getType(),data:{},options:t});this.setState({chart:s},this.updateData)}},this.destroyChart=()=>{this.state&&this.state.chart&&this.state.chart.destroy()}}componentDidMount(){this.initChart(),window.addEventListener("mousemove",this.removeTooltip)}componentWillUnmount(){this.destroyChart(),window.removeEventListener("mousemove",this.removeTooltip)}componentDidUpdate(){this.state.chart&&(this.state.chart.config.type!==this.getType()?this.initChart():this.updateData())}static getColor(e){let t=["#97CC64","#FF5A3E","#77B6E7","#FFD963","#A9B9B8","#DC9D6B","#8549ba","#00a950","#166a8f","#acc236","#537bc4","#f53794","#f67019","#4dc9f6"];for(;e>=t.length&&t.length>0;)e-=t.length;return t[e]}render(){if(!this.props.visible)return null;const e="auto"===this.props.height?"100%":this.props.height;return n.createElement(n.Fragment,null,n.createElement("canvas",{ref:e=>this.canvas=e,style:{height:e}}),n.createElement(Te,{tooltip:this.state.tooltip,chart:this.state.chart}))}updateData(){const{chart:e}=this.state;if(!e)return;const t=[];if(l().each(this.props.columns,((e,s)=>{const n=l().defaults(e,{stack:this.isStacked()?"0":e.identifier,borderColor:Oe.getColor(s),yAxisID:this.getScaleId(e.dataType)}),a=e.backgroundOpacity?e.backgroundOpacity:.9;l().isArray(e.borderColor)?(n.backgroundColor=l().map(e.borderColor,(e=>ze().helpers.color(e).alpha(a).rgbString())),n.pointBackgroundColor=l().map(e.borderColor,(e=>ze().helpers.color(e).alpha(1).rgbString()))):(n.backgroundColor=ze().helpers.color(e.borderColor).alpha(a).rgbString(),n.pointBackgroundColor=ze().helpers.color(e.borderColor).alpha(1).rgbString()),t.push(n)})),e.data={labels:this.props.labels,datasets:t},e.config.options&&e.config.options.scales){let s=!0;l().each(e.config.options.scales.yAxes,(e=>{let n=!1;l().each(t,(t=>{t.yAxisID===e.id&&!0!==t.hidden&&(n=!0)})),e.display=this.props.gridLines&&n,e.stacked=!1,e.gridLines&&(e.gridLines.drawOnChartArea=s),n&&(s=!1)}))}e.update({duration:0})}getScales(){let e={xAxes:[{display:this.props.axes,stacked:this.isStacked(),id:"x-axis-c",type:"category",gridLines:{display:!1},scaleLabel:{display:!1},ticks:{autoSkipPadding:10,maxRotation:0}}]};return e.yAxes=l().map(["money","pk","fk","number","percent"],(e=>({display:!0,id:this.getScaleId(e),position:"money"===e?"left":"right",stacked:this.isStacked(),gridLines:{display:this.props.gridLines,drawBorder:!0,drawTicks:!0,drawOnChartArea:!0},ticks:{beginAtZero:!0}}))),e}getScaleId(e){switch(e){case"money":case"pk":case"fk":case"number":case"percent":return"scale-"+e;default:return"scale-number"}}getType(){return"stacked"===this.props.type?"bar":this.props.type}isStacked(){return"stacked"===this.props.type}}const Ae={Table:"dataTable-Table_3NfqS",table:"dataTable-Table_3NfqS",asc:"dataTable-asc_2JLiu",desc:"dataTable-desc_169VP",HeaderActions:"dataTable-HeaderActions_3wzg3",headerActions:"dataTable-HeaderActions_3wzg3",Totals:"dataTable-Totals_MPBXg",totals:"dataTable-Totals_MPBXg",Even:"dataTable-Even_IhDBW",even:"dataTable-Even_IhDBW",EmptyRow:"dataTable-EmptyRow_10cGc",emptyRow:"dataTable-EmptyRow_10cGc",left:"dataTable-left_1hFt_",right:"dataTable-right_2WkEe"};var Le=s(4849),Be=s(1042),Ne=s(5031),Fe=s(3934);class _e extends n.Component{render(){return this.props.rows.length?n.createElement("table",{className:Ae.Table},n.createElement("thead",null,this.renderHeaderRow(),this.renderHeaderActionsRow(),this.props.rows.length>2?this.renderTotalsRow():null),n.createElement("tbody",null,this.renderBodyRows()),n.createElement("tfoot",null,this.renderTotalsRow())):n.createElement("table",{className:Ae.Table},n.createElement("thead",null,this.renderHeaderRow()),n.createElement("tbody",null,this.renderEmptyRow()))}renderHeaderRow(){const e=l().map(this.props.columns,((e,t)=>{const s=e.headerRenderer?e.headerRenderer(e):n.createElement("div",null,e.label),a=oe()(Ae[e.align]);let r;"asc"==e.sort?r=n.createElement(Le.J,{source:Ne.S}):"desc"==e.sort&&(r=n.createElement(Le.J,{source:Fe.S}));const o="right"===e.align?"trailing":"leading";return n.createElement("th",{key:t,className:a,onClick:t=>{t.defaultPrevented||e.onHeaderClick&&e.onHeaderClick(e)}},n.createElement(Be.D,{wrap:!1,spacing:"tight",alignment:"center",distribution:o},s,r))}));return n.createElement("tr",null,e)}renderHeaderActionsRow(){let e=!1;const t=l().map(this.props.columns,((t,s)=>{const a=t.headerActionsRenderer?t.headerActionsRenderer(t):null;a&&(e=!0);const r=oe()(Ae.HeaderActions,Ae[t.align]);return n.createElement("th",{className:r,key:s},a)}));return e?n.createElement("tr",null,t):null}renderBodyRows(){return l().map(this.props.rows,((e,t)=>{const s=l().map(this.props.columns,((t,s)=>{let a=t.cellRenderer?t.cellRenderer(t,e):e.formattedData[t.accessor];"image"==t.column.type&&(a=n.createElement("img",{src:e.formattedData[t.accessor]}));const r=t.cellClassName?t.cellClassName(t,e):"",o=oe()(r,Ae[t.align]);return n.createElement("td",{key:s,className:o},a)})),a=oe()(t%2&&Ae.Even);return n.createElement("tr",{className:a,key:t},s)}))}renderTotalsRow(){const{totals:e}=this.props;if(!e)return null;let t=0;const s=l().map(this.props.columns,((s,a)=>{const r=s.totalsRenderer?s.totalsRenderer(s,e):e.data[s.accessor];r||t++;const o=oe()(Ae[s.align]);return n.createElement("th",{key:a,className:o},r)}));return t===s.length?null:n.createElement("tr",{className:Ae.Totals},s)}renderEmptyRow(){return n.createElement("tr",{className:Ae.EmptyRow},n.createElement("td",{colSpan:this.props.columns.length},"We couldn't find any records."))}}var He=s(4727),Ie=s(1072),We=s(3855),Ve=s(2524);class Ke extends n.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.toggle=()=>{this.setState({active:!this.state.active})}}render(){const e=[];l().each(this.props.selected,(t=>{const s=l().find(this.props.options,{value:t});s&&e.push(s.label)}));let t=e.length>0?e.join(", "):this.props.label;e.length>=2&&(t=this.props.label?this.props.label+": "+e.length+" items":e.length+" items");const s=n.createElement(He.jN,{label:this.props.label,id:this.props.label,labelHidden:this.props.labelHidden},n.createElement(Ie.z,{disclosure:!0,onClick:this.toggle,pressed:this.state.active},t));return n.createElement(We.J,{active:this.state.active,activator:s,onClose:this.toggle},n.createElement(Ve.X,{title:this.props.label,allowMultiple:!0,options:this.props.options,selected:this.props.selected,onChange:this.props.onChange}))}}const qe={Sheet:"Sheet-Sheet_3x_or",sheet:"Sheet-Sheet_3x_or"};var Ue=s(6021),Ye=s(2896),Ge=s(7932),Je=s(1821),$e=s(8235),Xe=s(1667),Ze=s(49);class Qe extends n.PureComponent{render(){const e=oe()(qe.Sheet,this.props.open&&qe.Open);return this.props.open?n.createElement(je.h,null,this.props.open?n.createElement(Ue.Y,null):null,n.createElement("div",{className:e},n.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n.createElement("div",{style:{alignItems:"center",borderBottom:"1px solid #DFE3E8",display:"flex",justifyContent:"space-between",padding:"1.6rem",width:"100%"}},n.createElement("h3",null,this.props.title),n.createElement(Ie.z,{icon:Ze.S,onClick:this.props.onClose,plain:!0})),n.createElement(Ye.R,{style:{height:"100%"}},this.props.children),n.createElement("div",{style:{borderTop:"1px solid #DFE3E8",padding:"1.6rem",width:"100%"}},n.createElement(Be.D,null,n.createElement(Be.D.Item,{fill:!0},n.createElement(Ge.h,null,(0,Je.B)(this.props.secondaryActions))),n.createElement(Be.D.Item,null,(0,Je.h)(this.props.primaryAction,{primary:!0})))))),n.createElement($e.n,{keyCode:Xe.s.Escape,handler:this.props.onClose})):null}}var et=s(8401),tt=s(2722),st=s(7045),nt=s(6314),at=s(4966),rt=s(4823),ot=s(6218),it=s(6516),lt=s(8691),ct=s(3854),ht=s(7909),pt=s(4576),dt=s(4787);class ut extends n.PureComponent{componentWillMount(){const e=p.getReportDataProvider(),t=e.reports[e.report];ne.dispatch(x.loadConfig(t)),x.request()}render(){const e=this.props.reportState.isLoading?n.createElement("div",{className:ae.SpinnerBg},n.createElement(et.$,null)):null;return n.createElement("div",{className:ae.Report},e,n.createElement(Be.D,{vertical:!0},n.createElement(un,null),n.createElement(_t,null),n.createElement(Ns,null)))}}const mt=(0,r.$j)((e=>({reportState:e.reportState})))(ut);var gt=s(7385);const bt=[{key:"world",label:"World",items:[]},{key:"002",label:"Africa",items:[{key:"015",label:"Northern Africa",items:"DZ,EG,EH,LY,MA,SD,SS,TN"},{key:"011",label:"Western Africa",items:"BF,BJ,CI,CV,GH,GM,GN,GW,LR,ML,MR,NE,NG,SH,SL,SN,TG"},{key:"017",label:"Middle Africa",items:"AO,CD,ZR,CF,CG,CM,GA,GQ,ST,TD"},{key:"014",label:"Eastern Africa",items:"BI,DJ,ER,ET,KE,KM,MG,MU,MW,MZ,RE,RW,SC,SO,TZ,UG,YT,ZM,ZW"},{key:"018",label:"Southern Africa",items:"BW,LS,NA,SZ,ZA"}]},{key:"150",label:"Europe",items:[{key:"154",label:"Northern Europe",items:"GG,JE,AX,DK,EE,FI,FO,GB,IE,IM,IS,LT,LV,NO,SE,SJ"},{key:"155",label:"Western Europe",items:"AT,BE,CH,DE,DD,FR,FX,LI,LU,MC,NL"},{key:"151",label:"Eastern Europe",items:"BG,BY,CZ,HU,MD,PL,RO,RU,SU,SK,UA"},{key:"039",label:"Southern Europe",items:"AD,AL,BA,ES,GI,GR,HR,IT,ME,MK,MT,CS,RS,PT,SI,SM,VA,YU"}]},{key:"019",label:"Americas",items:[{key:"021",label:"Northern America",items:"BM,CA,GL,PM,US"},{key:"029",label:"Caribbean",items:"AG,AI,AN,AW,BB,BL,BS,CU,DM,DO,GD,GP,HT,JM,KN,KY,LC,MF,MQ,MS,PR,TC,TT,VC,VG,VI"},{key:"013",label:"Central America",items:"BZ,CR,GT,HN,MX,NI,PA,SV"},{key:"005",label:"South America",items:"AR,BO,BR,CL,CO,EC,FK,GF,GY,PE,PY,SR,UY,VE"}]},{key:"142",label:"Asia",items:[{key:"143",label:"Central Asia",items:"TM,TJ,KG,KZ,UZ"},{key:"030",label:"Eastern Asia",items:"CN,HK,JP,KP,KR,MN,MO,TW"},{key:"034",label:"Southern Asia",items:"AF,BD,BT,IN,IR,LK,MV,NP,PK"},{key:"035",label:"South-Eastern Asia",items:"BN,ID,KH,LA,MM,BU,MY,PH,SG,TH,TL,TP,VN"},{key:"145",label:"Western Asia",items:"AE,AM,AZ,BH,CY,GE,IL,IQ,JO,KW,LB,OM,PS,QA,SA,SY,TR,YE"}]},{key:"009",label:"Oceania",items:[{key:"053",label:"Australia and New Zealand",items:"AU,NF,NZ"},{key:"054",label:"Melanesia",items:"FJ,NC,PG,SB,VU"},{key:"057",label:"Micronesia",items:"FM,GU,KI,MH,MP,NR,PW"},{key:"061",label:"Polynesia",items:"AS,CK,NU,PF,PN,TK,TO,TV,WF,WS"}]}],Ct=["EH","ZR","KE","RE","YT","GG","JE","AX","FO","IM","SJ","DD","FX","MC","SU","GI","MT","CS","VA","YU","BM","PM","AI","AN","AW","BL","GP","KY","MF","MQ","MS","PR","TC","VG","VI","GF","FK","HK","MO","TW","BU","SG","TP","PS"];class vt extends n.PureComponent{constructor(){super(...arguments),this.state={continent:"world",subContinent:"",country:""}}render(){let e=[],t=[];t.push("Country"),l().each(this.props.columns,(e=>{t.push(e.label)})),e.push(t),l().each(this.props.labels,((t,s)=>{let n=[];n.push(t),l().each(this.props.columns,(e=>{e.data&&n.push(e.data[s])})),e.push(n)})),"mst_reports_postcode|place"!==this.props.response.request.dimensions[0]&&"mst_reports_postcode|postcode"!==this.props.response.request.dimensions[0]||(e=[],t=["Latitude","Longitude","Label"],l().each(this.props.columns,(e=>{t.push(e.label)})),e.push(t),l().each(this.props.response.items,((s,n)=>{const a=parseFloat(s.data["mst_reports_postcode|lat"]),r=parseFloat(s.data["mst_reports_postcode|lng"]);t=[a,r,s.data[this.props.response.request.dimensions[0]]],l().each(this.props.columns,(e=>{e.data&&t.push(e.data[n])})),0!==a&&0!==r&&e.push(t)})));let s={region:this.state.country?this.state.country:this.state.subContinent?this.state.subContinent:this.state.continent,resolution:this.state.country?"provinces":"countries",backgroundColor:"transparent"};return n.createElement("div",null,n.createElement("div",{style:{height:"35rem"}},n.createElement(gt.k,{chartType:"GeoChart",width:"100%",height:"35rem",options:s,data:e,mapsApiKey:"AIzaSyBwkuaSbUcTMJPu9WbZDyr80ufSn0IP15A"})),this.renderRegions())}renderRegions(){let e=[],t=[],s=[];l().each(bt,(t=>{e.push(n.createElement(Ie.z,{key:t.key,pressed:this.state.continent===t.key,onClick:()=>{this.setState(Object.assign(Object.assign({},this.state),{continent:t.key,subContinent:"",country:""}))}},t.label))}));const a=l().find(bt,{key:this.state.continent});if(a){l().each(a.items,(e=>{t.push(n.createElement(Ie.z,{key:e.key,pressed:this.state.subContinent===e.key,onClick:()=>{this.setState(Object.assign(Object.assign({},this.state),{subContinent:e.key,country:""}))}},e.label))}));const e=l().find(a.items,{key:this.state.subContinent});e&&l().each(e.items.split(","),(e=>{-1===l().indexOf(Ct,e)&&s.push(n.createElement(Ie.z,{key:e,pressed:this.state.country===e,onClick:()=>{this.setState(Object.assign(Object.assign({},this.state),{country:e}))}},e))}))}return n.createElement(Be.D,{vertical:!0},n.createElement(Ge.h,{segmented:!0},e),n.createElement(Ge.h,{segmented:!0},t),n.createElement(Ge.h,{segmented:!0},s))}}class ft extends n.PureComponent{render(){const{type:e}=this.props;let t=n.createElement("div",null);return"bar"===e||"doughnut"===e||"line"===e||"stacked"==e?t=n.createElement(Oe,{type:e,labels:this.props.labels,columns:this.props.columns,visible:this.props.visible,height:300,gridLines:!0,axes:!0}):"geo"===e&&(t=n.createElement(vt,{type:e,labels:this.props.labels,columns:this.props.columns,visible:this.props.visible,response:this.props.response})),n.createElement("div",null,t)}}var yt=s(6041),Et=s.n(yt),St=s(7734),Dt=s.n(St),kt=s(4494),wt=s.n(kt),xt=s(7742),Mt=s.n(xt),Rt=(s(2132),s(2318),s(6482),s(4114),s(9510)),zt=s.n(Rt),Pt=s(9530),jt=s.n(Pt),Tt=s(5268),Ot=s.n(Tt),At=(s(1061),s(4313),s(6967),s(7833),s(3312),s(5551),s(2730),s(727),s(6713),s(5083),s(6766),s(3417),s(4992),s(8989),s(1460),s(2096),s(4294),s(9617)),Lt=s.n(At),Bt=(s(6117),s(7024));class Nt extends n.Component{constructor(){super(...arguments),this.toggleColumn=e=>{let t=l().clone(this.props.columns);-1==l().indexOf(t,e)?t.push(e):t=l().without(t,e),t.length>0&&this.props.onChangeColumns(t)},this.setChartType=e=>{this.props.onChangeType(e)}}render(){const e=this.getLabels(),t=this.getColumns();return 1!=this.props.response.request.dimensions.length||0==e.length||0==t.length?null:n.createElement(tt.z,{sectioned:!0},n.createElement("div",{className:"chart-Container_2GrKA"},this.renderTypes(),n.createElement(ft,{type:this.props.type,labels:e,columns:t,response:this.props.response,visible:!0})))}getColor(e,t){const s=["#FFD963","#A9B9B8","#DC9D6B","#8549ba","#00a950","#166a8f","#acc236","#537bc4","#f53794","#f67019","#4dc9f6"];if(l().indexOf(this.props.columns,t)>=0)return["#97CC64","#FF5A3E","#77B6E7"][e=l().indexOf(this.props.columns,t)];for(;e>=s.length&&s.length>0;)e-=s.length;return s[e]}renderTypes(){const e=["bar","doughnut","line","stacked"].map((e=>{let t=Et();switch(e){case"bar":t=Et();break;case"doughnut":t=Dt();break;case"line":t=wt();break;case"stacked":t=Lt()}const s=this.props.type==e,a=n.createElement(Le.J,{source:t,color:s?"highlight":"subdued"});return n.createElement(Ie.z,{key:e,size:"slim",onClick:()=>{this.setChartType(e)},icon:a})}));return n.createElement("div",{className:"chart-TypeSelector_8p0DN"},n.createElement(Ge.h,{segmented:!0},e))}getLabels(){let e=[];const{response:t}=this.props;return l().each(t.items,(s=>{l().each(t.request.dimensions,(t=>{const n=s.formattedData[t]?s.formattedData[t]:"";e.push(n)}))})),e}getColumns(){const e=[];return l().each(this.props.state.chartColumns,((t,s)=>{const n=d.getColumn(t),a=l().map(this.props.response.items,(e=>{const s=parseFloat(e.data[t]);return l().isNaN(s)?0:s})),r={identifier:n.identifier,dataType:n.type,borderWidth:1,pointRadius:3,label:n.label,borderColor:this.getColor(s,t),hidden:-1===l().indexOf(this.props.columns,t),backgroundOpacity:"line"==this.props.type?.3:.9,fill:!0,data:a};"doughnut"===this.props.type&&(r.borderColor=l().map(a,((e,t)=>this.getColor(t,"")))),e.push(r)})),e}}class Ft extends n.Component{constructor(){super(...arguments),this.onChangeColumns=e=>{ne.dispatch(x.updateState({chartColumns:e}))},this.onChangeType=e=>{ne.dispatch(x.updateState({chartType:e}))}}render(){const{report:e,response:t}=this.props.reportState;if(!t)return null;let s=e.state.chartType;switch(s||(s="bar"),s){case"pie":s="doughnut";break;case"column":s="bar"}return n.createElement(Nt,{type:s,columns:e.state.chartColumns,onChangeColumns:this.onChangeColumns,onChangeType:this.onChangeType,state:e.state,response:t})}}const _t=(0,r.$j)((e=>({reportState:e.reportState})))(Ft);class Ht extends n.Component{constructor(){super(...arguments),this.handlePage=e=>{const{pageSize:t}=this.props;let s=parseInt(e);s<1?s=1:s>this.pages()&&(s=this.pages()),this.props.onChange(s,t)},this.handlePageSize=e=>{this.props.onChange(this.props.currentPage,Number(e))},this.handlePrevious=()=>{const{currentPage:e,pageSize:t}=this.props,s=e>1?e-1:e;this.props.onChange(s,t)},this.handleNext=()=>{const{currentPage:e,pageSize:t}=this.props,s=e<this.pages()?e+1:this.pages();this.props.onChange(s,t)},this.pages=()=>{const{pageSize:e,size:t}=this.props;return Math.ceil(t/e)}}render(){const{currentPage:e,pageSize:t,size:s}=this.props,a=1===e,r=e===this.pages();return n.createElement("div",{style:{padding:"0px 20px 15px 20px"}},n.createElement(Be.D,{alignment:"center",distribution:"equalSpacing"},n.createElement("small",null,s," records found"),n.createElement(Be.D,null,n.createElement(de.P,{label:"Page Size",labelInline:!0,options:[{label:"20",value:"20"},{label:"30",value:"30"},{label:"50",value:"50"},{label:"100",value:"100"},{label:"200",value:"200"}],value:String(t),onChange:this.handlePageSize}),n.createElement("div",{style:{width:120}},n.createElement(ke.n,{autoComplete:"off",label:"",type:"number",disabled:1===this.pages(),suffix:"of "+this.pages(),value:String(e),onChange:this.handlePage})),n.createElement(Ge.h,{segmented:!0},n.createElement(Ie.z,{disabled:a,onClick:this.handlePrevious,icon:Bt.h$K}),n.createElement(Ie.z,{disabled:r,onClick:this.handleNext,icon:Bt.LWp})))))}}const It={Nil:"table-Nil_319B0",nil:"table-Nil_319B0",Dimension:"table-Dimension_11Dxr",dimension:"table-Dimension_11Dxr",Sorted:"table-Sorted_2Db6H",sorted:"table-Sorted_2Db6H",Container:"table-Container_1eSrH",container:"table-Container_1eSrH",Loading:"table-Loading_3vLvZ",loading:"table-Loading_3vLvZ",Spinner:"table-Spinner_28uyv",spinner:"table-Spinner_28uyv"},Wt=new class{constructor(){this.isDimension=(e,t)=>-1!==l().indexOf(e.dimensions,t),this.getFilter=(e,t)=>l().find(e,t)||!1,this.removeFilter=(e,t)=>l().reject(e,t),this.ensureFilter=(e,t)=>{let s=this.removeFilter(e,{column:t.column,conditionType:t.conditionType});return s.push(t),s},this.getSortOrder=(e,t)=>l().find(e,t)||!1,this.removeSortOrder=(e,t)=>l().reject(e,t),this.ensureSortOrder=(e,t)=>{let s=this.removeSortOrder(e,{column:t.column,direction:t.direction});return s.push(t),s},this.toggleColumn=(e,t)=>(e=l().clone(e),-1==l().indexOf(e,t)?e.push(t):e=l().without(e,t),e)}};class Vt extends n.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.toggleActions=()=>{this.setState({active:!this.state.active})},this.follow=e=>{window.location.href=e}}render(){const{item:e}=this.props;if(!e.formattedData.actions)return null;const t=n.createElement(Ie.z,{size:"slim",pressed:this.state.active,plain:!0,onClick:this.toggleActions,icon:Bt.Hhm}),s=l().map(e.formattedData.actions,(e=>({content:e.label,onAction:this.follow.bind(this,e.href)})));return n.createElement(We.J,{active:this.state.active,activator:t,onClose:this.toggleActions},n.createElement(rt.S,{items:s}))}}const Kt={Cell:"cell-Cell_1VcN_",cell:"cell-Cell_1VcN_",Sorted:"cell-Sorted_3HuRr",sorted:"cell-Sorted_3HuRr",CountryValue:"cell-CountryValue_NBKHU",countryValue:"cell-CountryValue_NBKHU",PercentLine:"cell-PercentLine_3JwXm",percentLine:"cell-PercentLine_3JwXm",PercentLineValue:"cell-PercentLineValue_zhN3q",percentLineValue:"cell-PercentLineValue_zhN3q"};class qt extends n.PureComponent{render(){const{identifier:e}=this.props,t=d.getColumn(e),s=oe()(Kt.Cell,Kt[t.type]);return n.createElement("span",{className:s},this.renderValue(),this.renderPercent())}renderValue(){const{item:e,identifier:t}=this.props,s=d.getColumn(t),a=e.data[t],r=e.formattedData[t];let o=r;if("str"===s.type&&o&&(o=[],l().each((r+"").split("\n"),((e,t)=>{o.push(n.createElement("div",{key:t},e))}))),"country"===s.type&&a){const e="https://flagpedia.net/data/flags/w580/"+a.toLowerCase()+".png";o=n.createElement("div",{className:Kt.CountryValue},n.createElement("img",{src:e}),r)}if("image"===s.type&&r&&(o=n.createElement("img",{src:r})),this.props.isPercent){const e=this.getPercentValue();o=!1!==e?Math.round(e)+"%":"N/A"}return o}renderPercent(){if(!this.props.isPercent)return!1;const e=this.getPercentValue();if(!1===e)return null;const t=e+"%";return n.createElement("div",{className:Kt.PercentLine},n.createElement("div",{className:Kt.PercentLineValue,style:{width:t}}))}getPercentValue(){const{item:e,totals:t,identifier:s}=this.props;if(!t)return!1;const n=parseFloat(e.data[s]),a=parseFloat(t.data[s]);if(l().isNaN(a)||0==a||l().isNaN(n))return!1;const r=n/a*100;return r>100?100:r}}class Ut extends n.PureComponent{constructor(){super(...arguments),this.toggleColumn=()=>{const{report:e,identifier:t}=this.props,s=Wt.toggleColumn(e.state.chartColumns,t);ne.dispatch(x.updateState({chartColumns:s}))}}render(){const{report:e,identifier:t}=this.props;if(!d.isChartableColumn(t))return null;const s=-1!==l().indexOf(e.state.chartColumns,t);return n.createElement(Ie.z,{size:"slim",onClick:this.toggleColumn,icon:n.createElement(Le.J,{source:Et(),color:s?"interactive":"subdued"})})}}const Yt=(0,r.$j)((e=>({report:e.reportState.report})))(Ut);class Gt extends n.PureComponent{render(){const{identifier:e,isPercentColumn:t}=this.props;return d.isChartableColumn(e)?n.createElement(Ie.z,{size:"slim",onClick:this.props.onToggle,icon:n.createElement(Le.J,{source:Mt(),color:t?"interactive":"subdued"})}):null}}class Jt extends n.PureComponent{render(){const{identifier:e}=this.props;return n.createElement("div",{className:"headerActionsCell-Wrapper_2Ysjk"},n.createElement(Ge.h,{segmented:!0},n.createElement(Yt,{identifier:e}),n.createElement(Gt,{identifier:e,isPercentColumn:this.props.isPercentColumn,onToggle:this.props.onTogglePercent.bind(this,e)})))}}var $t=s(5080);class Xt extends n.PureComponent{constructor(){super(...arguments),this.onRemove=e=>{this.props.onChange(l().reject(this.props.columns,e))},this.onChange=e=>{const t=l().findIndex(this.props.columns,(t=>t.identifier==e.identifier)),s=l().clone(this.props.columns);s.splice(t,1,e),this.props.onChange(s)},this.onSortEnd=e=>{this.props.onChange((0,$t.Rp)(this.props.columns,e.oldIndex,e.newIndex))}}render(){const e=this,t=(0,$t.W8)((t=>{const s=t.value;return n.createElement("li",{key:s.identifier,className:"SelectedColumns-SortableColumn_1tpmx"},n.createElement(Es,{column:s,className:"SelectedColumns-Column_3KDfb",sortable:!0,onChange:this.onChange,onRemove:this.onRemove.bind(e,s)}))})),s=(0,$t.JN)((e=>{const s=l().map(e.items,((e,s)=>n.createElement(t,{key:`item-${s}`,index:s,value:e})));return n.createElement("ul",{key:"SortableList"},s)}));return n.createElement("div",{className:"SelectedColumns-Wrapper_3-RID"},n.createElement(s,{items:this.props.columns,onSortEnd:this.onSortEnd,helperClass:"SelectedColumns-Helper_ThyOu",useDragHandle:!0,axis:"y"}))}}class Zt extends n.PureComponent{constructor(){super(...arguments),this.state={selectedColumns:[]},this.onChange=e=>{this.setState({selectedColumns:e})},this.onCancel=()=>{this.props.onClose()},this.onApply=()=>{this.props.onChange(this.state.selectedColumns),this.props.onClose()},this.toggleColumn=e=>{let t=l().clone(this.state.selectedColumns);if(1===this.props.limit?(t=[],t.push(e)):t=d.ToggleColumn(t,e),0==t.length)return null;setTimeout((()=>{this.setState({selectedColumns:t})}),10)},this.onChangeSelectedColumns=e=>{this.setState({selectedColumns:e})}}componentWillReceiveProps(e){this.setState({selectedColumns:e.selectedColumns})}componentDidMount(){this.setState({selectedColumns:this.props.selectedColumns})}render(){const{open:e,activator:t,onClose:s}=this.props,a={content:"Apply",onAction:this.onApply},r=[{content:"Cancel",onAction:this.onCancel}],o=n.createElement("p",null," ",this.props.selectedColumns.length," out of ",this.props.columns.length," selected");return n.createElement("div",null,t,n.createElement(at.u,{open:e,onClose:s,title:"Columns",primaryAction:a,secondaryActions:r,large:!0,instant:!0,limitHeight:!0,footer:o},e?this.renderBody():null))}renderBody(){return n.createElement("div",{className:"columnSelector-Container_13EfJ"},n.createElement(Ye.R,{className:"columnSelector-TreeWrapper_UxXnq",shadow:!0,vertical:!0,horizontal:!1},n.createElement(vs,{columns:this.props.columns,selectedColumns:this.state.selectedColumns,tableID:this.props.scope,onToggleColumn:this.toggleColumn})),n.createElement(Ye.R,{className:"columnSelector-ColumnsWrapper_13Jqo",shadow:!0,vertical:!0,horizontal:!1},n.createElement(Xt,{columns:this.state.selectedColumns,onChange:this.onChange})))}}var Qt=s(5570);class es extends n.Component{constructor(){super(...arguments),this.state={active:!1,activatorNode:null,range:{startDate:(0,u.Nm)(new Date),endDate:(0,u.Vf)(new Date)}},this.componentWillReceiveProps=e=>{const{filters:t}=e;this.applyFilters(t)},this.applyFilters=e=>{const t=Wt.getFilter(e,{column:this.props.identifier,conditionType:"gteq"}),s=Wt.getFilter(e,{column:this.props.identifier,conditionType:"lteq"});if(t&&s){const e={startDate:(0,u.b7)(new Date((0,u.WU)(t.value,"MM/DD/YYYY"))),endDate:(0,u.iX)(new Date((0,u.WU)(s.value,"MM/DD/YYYY")))};this.setState({range:e})}else this.handleApply([this.state.range])},this.handleClick=()=>{this.setState({active:!this.state.active})},this.handleCancel=()=>{this.setState({active:!1})},this.handleApply=e=>{const t=e[0];this.setState({range:t,active:!1});const{filters:s,reportState:n,boardState:a}=this.props;if(n){let e="custom";Se.forEach((s=>{l().isEqual(s.range,t)&&(e=s.value)})),n.timeRange=e}if(a){let e="custom";Se.forEach((s=>{l().isEqual(s.range,t)&&(e=s.value)})),a.timeRange=e}let r=Wt.ensureFilter(s,{column:this.props.identifier,conditionType:"gteq",value:m.toMysqlFormat(t.startDate,!1)});r=Wt.ensureFilter(r,{column:this.props.identifier,conditionType:"lteq",value:m.toMysqlFormat(t.endDate,!0)}),this.props.onChange(r)}}componentWillMount(){const{filters:e}=this.props;this.applyFilters(e)}render(){const{active:e}=this.state,t=(0,u.WU)(this.state.range.startDate,"MMM D, YYYY")+" – "+(0,u.WU)(this.state.range.endDate,"MMM D, YYYY"),s=n.createElement(Ie.z,{onClick:this.handleClick,icon:Qt.S,pressed:e},t);return n.createElement(We.J,{active:e,activator:s,onClose:this.handleCancel,preferredAlignment:"left",sectioned:!0,fullHeight:!0},this.renderPicker())}renderPicker(){return n.createElement(Me,{ranges:[this.state.range],months:2,onApply:this.handleApply,onCancel:this.handleCancel})}}class ts extends n.PureComponent{constructor(){super(...arguments),this.state={selector:!1},this.toggleSelector=()=>{this.setState({selector:!this.state.selector})},this.onChangeColumns=e=>{const t=l().map(e,(e=>e.identifier));this.props.onChange(t),this.toggleSelector()}}render(){let{columns:e,limit:t}=this.props;const s=l().map(e,((e,t)=>{const s=d.getColumn(e);return n.createElement(Es,{key:t,column:s,onClick:this.toggleSelector})})),a=0==e.length||t>1?n.createElement(Ie.z,{onClick:this.toggleSelector,pressed:this.state.selector},"Manage"):null;return n.createElement(He.jN,{id:this.props.label,label:this.props.label,helpText:this.props.helpText},n.createElement(Be.D,{spacing:"tight"},s,n.createElement(Zt,{open:this.state.selector,scope:"",activator:a,limit:t,selectedColumns:d.idToList(e),columns:d.idToList(this.props.allColumns),onChange:this.onChangeColumns,onClose:this.toggleSelector})))}}var ss=s(1506),ns=s(532),as=s(5744);class rs extends n.PureComponent{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange(e)},this.onChangeMode=()=>{"tree"==this.props.mode?this.props.onChangeMode("advanced"):this.props.onChangeMode("tree")}}render(){const e=n.createElement(Ie.z,{onClick:this.onChangeMode,pressed:"advanced"===this.props.mode,icon:"tree"===this.props.mode?ss.S:ns.S});return n.createElement("div",{className:"SearchBox-Wrapper_aFB2g"},n.createElement(ke.n,{label:"",placeholder:"Type to search",autoComplete:"off",prefix:n.createElement(Le.J,{source:as.S,color:"primary"}),value:this.props.query,onChange:this.onChange,connectedRight:e}))}}const os="Table-TreeItem_2-xCT",is="Table-Header_2GLpL",ls="Table-Column_2R_Ol";var cs=s(5044),hs=s(6109),ps=s(6999);const ds=({chunks:e})=>e.sort(((e,t)=>e.start-t.start)).reduce(((e,t)=>{if(0===e.length)return[t];{const s=e.pop();if(t.start<=s.end){const n=Math.max(s.end,t.end);e.push({highlight:!1,start:s.start,end:n})}else e.push(s,t);return e}}),[]),us=({autoEscape:e,caseSensitive:t,sanitize:s=ms,searchWords:n,textToHighlight:a})=>(a=s(a),n.filter((e=>e)).reduce(((n,r)=>{r=s(r),e&&(r=r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));const o=new RegExp(r,t?"g":"gi");let i;for(;i=o.exec(a);){let e=i.index,t=o.lastIndex;t>e&&n.push({highlight:!1,start:e,end:t}),i.index===o.lastIndex&&o.lastIndex++}return n}),[]));function ms(e){return e}class gs extends n.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.toggleItem=()=>{this.setState({active:!this.state.active})},this.renderColumns=e=>{if(!this.state.active)return null;const t=l().map(e,(e=>n.createElement("div",{key:e.identifier,className:ls,onClick:this.props.onToggleColumn.bind(this,e)},n.createElement(st.X,{label:this.renderColumnLabel(e),checked:this.isSelected(e)}))));return n.createElement(n.Fragment,null,t)}}componentWillReceiveProps(e){""!==e.query&&this.columns(e.query).length<10?this.setState({active:!0}):""!==this.props.query&&""===e.query&&this.setState({active:!1})}render(){const{table:e}=this.props,{active:t}=this.state,s=this.columns(this.props.query);if(0===s.length)return null;const a=t?hs.S:ps.S,r=oe()(os,t&&"Table-Active_1L_Sc"),o=this.numberOfSelected(e)>0?n.createElement("div",{className:"Table-Partially_uJAdJ"}):null;return n.createElement("div",{className:r},n.createElement("div",{className:is,onClick:this.toggleItem},n.createElement(Be.D,{spacing:"tight"},n.createElement(Be.D.Item,{fill:!0},n.createElement(Be.D,{alignment:"center"},n.createElement(Be.D.Item,{fill:!0},n.createElement("div",{className:"Table-Label_3_UZM"},e.label)),n.createElement(cs.x,{as:"span",color:"subdued",variant:"bodySm"},s.length),o)),n.createElement(Le.J,{source:a,color:"subdued"}))),this.renderColumns(s))}isSelected(e){return void 0!==l().find(this.props.selectedColumns,(t=>t.identifier===e.identifier))}numberOfSelected(e){let t=0;const s=d.tableColumns(e);return l().each(s,(e=>{this.isSelected(e)&&t++})),t}renderColumnLabel(e){const t=g.aggregatorLabel(e),s=g.typeLabel(e);return n.createElement(Be.D,{wrap:!1},n.createElement(Be.D.Item,{fill:!0},this.renderColumnText(e)),n.createElement("div",{className:"Table-Modifier_22alk"},t),n.createElement("div",{className:"Table-Type_3lUTl"},s))}renderColumnText(e){const t=e.label;if(0===this.props.query.length)return t;const s=(({autoEscape:e,caseSensitive:t=!1,findChunks:s=us,sanitize:n,searchWords:a,textToHighlight:r})=>(({chunksToHighlight:e,totalLength:t})=>{const s=[],n=(e,t,n)=>{t-e>0&&s.push({start:e,end:t,highlight:n})};if(0===e.length)n(0,t,!1);else{let s=0;e.forEach((e=>{n(s,e.start,!1),n(e.start,e.end,!0),s=e.end})),n(s,t,!1)}return s})({chunksToHighlight:ds({chunks:s({autoEscape:e,caseSensitive:t,sanitize:n,searchWords:a,textToHighlight:r})}),totalLength:r?r.length:0}))({caseSensitive:!1,searchWords:this.props.query.split(" "),textToHighlight:t});return 0==s.length?t:l().map(s,(e=>{const s=t.substr(e.start,e.end-e.start);return e.highlight?n.createElement("strong",{key:e.start},s):n.createElement("span",{key:e.start},s)}))}columns(e){const t=[];l().each(this.props.columns,(e=>{e.table==this.props.table.identifier&&!1===e.internal&&t.push(e)}));const s=[];return e=e.toLowerCase(),l().each(t,(t=>{const n=t.label;e&&-1==n.toLowerCase().indexOf(e)||s.push(t)})),s}}class bs extends n.PureComponent{render(){const e=[];return l().each(d.tables(),(t=>{t.internal||e.push(n.createElement(gs,{key:t.identifier,columns:this.props.columns,table:t,query:this.props.query,selectedColumns:this.props.selectedColumns,onToggleColumn:this.props.onToggleColumn}))})),n.createElement("div",null,e)}}class Cs extends n.PureComponent{constructor(){super(...arguments),this.columns=()=>{let e=[];const t=this.props.query.toLowerCase();return l().each(d.columns(),(s=>{const n=s.identifier.toLocaleUpperCase();t&&-1==n.toLowerCase().indexOf(t)||e.push(s)})),e}}render(){const e=this.columns(),t=[];return l().each(e,((e,s)=>{s>100||t.push(n.createElement("div",{key:e.identifier,className:ls,onClick:this.props.onToggleColumn.bind(this,e)},n.createElement(st.X,{label:e.identifier,checked:this.isSelected(e)})))})),e.length>100&&t.push(n.createElement("div",{key:"more",className:ls},"and more ",e.length-100," other columns")),n.createElement("div",null,n.createElement(nt.j,{title:"Advanced mode",status:"warning"},n.createElement("small",null,"Search column across ALL tables by identifier."),n.createElement("br",null),n.createElement("small",null,"Make sure, that selected columns are ",n.createElement("strong",null,"applicable")," to the current report.")),n.createElement("div",{className:os},n.createElement("div",{className:is},"Found: ",e.length," columns"),t))}isSelected(e){return void 0!==l().find(this.props.selectedColumns,(t=>t.identifier===e.identifier))}}class vs extends n.PureComponent{constructor(){super(...arguments),this.state={query:"",mode:"tree"},this.handleQueryChange=e=>{this.setState({query:e})},this.handleModeChange=e=>{this.setState({mode:e})},this.onToggleColumn=e=>{this.props.onToggleColumn(e)}}render(){let e="tree"===this.state.mode?n.createElement(bs,{columns:this.props.columns,selectedColumns:this.props.selectedColumns,onToggleColumn:this.onToggleColumn,query:this.state.query}):n.createElement(Cs,{selectedColumns:this.props.selectedColumns,onToggleColumn:this.onToggleColumn,query:this.state.query});return n.createElement(n.Fragment,null,n.createElement(rs,{query:this.state.query,mode:this.state.mode,onChange:this.handleQueryChange,onChangeMode:this.handleModeChange}),e)}}var fs=s(7953),ys=s(6815);class Es extends n.PureComponent{constructor(){super(...arguments),this.state={edit:!1},this.onClick=()=>{this.props.onClick&&this.props.onClick(this.props.column),this.props.onChange&&this.toggleEdit()},this.onChange=e=>{this.props.onChange&&this.props.onChange(e),this.setState({edit:!1})},this.onRemove=()=>{this.props.onRemove&&this.props.onRemove(this.props.column)},this.toggleEdit=()=>{this.setState({edit:!this.state.edit})}}render(){const{column:e}=this.props,t=e.label,s=g.typeLabel(e),a=g.aggregatorLabel(e),r=oe()("Column-Column_3Z7zJ",this.props.className,(this.props.onClick||this.props.onChange)&&"Column-Clickable_2xGId"),o=this.props.onRemove?n.createElement("div",{className:"Column-Remove_1jNre",onClick:this.onRemove},n.createElement(Le.J,{source:fs.S})):null;let i=null;if(this.props.sortable){const e=(0,$t.W6)((()=>n.createElement("div",{className:"Column-DragHandler_1f1Vm"},n.createElement(Le.J,{source:ys.S}))));i=n.createElement(e,null)}const l=e.identifier?n.createElement(n.Fragment,null,n.createElement("div",{className:"Column-Field_1z3SM"},n.createElement(Ss,{column:e},n.createElement("span",null,t))),n.createElement("div",{className:"Column-Aggregator_24f8a"},a),n.createElement("div",{className:"Column-Type_kiznq"},s)):"Please select";return n.createElement(n.Fragment,null,n.createElement("div",{className:r},i,n.createElement("div",{className:"Column-ClickableArea_ozG-8",onClick:this.onClick},l),o))}}class Ss extends n.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.open=()=>{this.setState({active:!0})},this.close=()=>{this.setState({active:!1})},this.renderContent=()=>{const{column:e}=this.props,t=d.getTable(e.table);if(!t)return e.label;let s="";switch(e.type){case"country":s="Country";break;case"date":s="Date";break;case"fk":case"number":case"pk":case"qty":case"money":s="Number";break;case"percent":s="Percent";break;case"select":case"str":case"str":s="String";default:s=e.type}let a="";switch(e.aggregator){case"avg":a="Average";break;case"sum":a="Sum";break;case"cnt":a="Count";break;case"week":a="Week";break;case"day":a="Day";break;case"month":a="Month";break;case"year":a="Year";break;case"quarter":a="Quarter";break;default:a=e.aggregator}return n.createElement("div",{style:{fontSize:12}},n.createElement("div",null,"Table: ",t.label," [",t.identifier,"]"),n.createElement("div",null,"Column: ",e.label," [",e.identifier,"]"),n.createElement("div",null,"Type: ",s," [",e.type,"]"),n.createElement("div",null,"Aggregator: ",a," [",e.aggregator,"]"))}}render(){const e=n.createElement("span",{onMouseOver:this.open,onMouseOut:this.close},this.props.children);return n.createElement(We.J,{activator:e,active:this.state.active,onClose:this.close,sectioned:!0},this.renderContent())}}class Ds extends n.PureComponent{render(){const{col:e}=this.props,t=d.getColumn(e.accessor);return n.createElement(Ss,{column:t},n.createElement("span",null,e.label))}}class ks extends n.Component{constructor(){super(...arguments),this.state={percentColumns:[]},this.togglePercentColumn=e=>{const t=Wt.toggleColumn(this.state.percentColumns,e);this.setState({percentColumns:t})},this.renderDataTable=()=>{const{report:e}=this.props.report,{response:t}=this.props.report;let s,a;t?(s=this.getRows(t.items),a=t.totals):(s=[],a=!1);const r=l().union(e.state.dimensions,e.state.columns).map((t=>{const s=d.getColumn(t),r=l().find(e.state.sortOrders,{column:t});return{accessor:s.identifier,label:s.label,sort:r?r.direction:null,column:s,align:g.isNumerable(s)?"right":"left",onHeaderClick:t=>{const{sortOrders:s}=e.state;let n=Wt.getSortOrder(s,{column:t.accessor});n?n.direction="asc"==n.direction?"desc":"asc":n={column:t.accessor,direction:"asc"},this.props.onChangeSortOrders([n])},headerRenderer:e=>n.createElement(Ds,{col:e}),headerActionsRenderer:e=>{const t=-1!==l().indexOf(this.state.percentColumns,e.accessor);return n.createElement(Jt,{identifier:e.accessor,isPercentColumn:t,onTogglePercent:this.togglePercentColumn})},cellClassName:t=>Wt.isDimension(e.state,t.accessor)?It.Dimension:"",cellRenderer:(t,s)=>{const r=Wt.isDimension(e.state,t.accessor),o=-1!==l().indexOf(this.state.percentColumns,t.accessor);return n.createElement(qt,{identifier:t.accessor,item:s,totals:a,isDimension:r,isPercent:o})},totalsRenderer:(e,t)=>{const s=d.getColumn(e.accessor),a=oe()(It.Cell,It[s.type]);return t.formattedData[e.accessor]?n.createElement("span",{className:a},t.formattedData[e.accessor]):null}}}));return this.isHasAction()&&r.push({accessor:"actions",align:"right",label:"",sort:null,column:d.getColumn("action"),cellRenderer:(e,t)=>n.createElement(Vt,{identifier:e.accessor,item:t})}),n.createElement(_e,{columns:r,rows:s,totals:a})},this.getRows=e=>{const t=[];return l().each(e,(e=>{if(t.push(e),e.items.length>0){const s=this.getRows(e.items);l().each(s,(e=>{t.push(e)}))}})),t},this.isHasAction=()=>{let e=!1;return this.props.report.response&&l().each(this.props.report.response.items,(t=>{t.formattedData.actions&&t.formattedData.actions.length>0&&(e=!0)})),e}}render(){return n.createElement("div",{style:{overflowX:"scroll"}},this.renderDataTable())}}class ws extends n.Component{getValue(e){const t=l().find(this.props.filters,{column:this.props.column.identifier,conditionType:e});return t?t.value:""}updateFilters(e,t){const s=this.props.column;let n=l().clone(this.props.filters);return n=l().reject(n,{column:s.identifier,conditionType:t}),e&&n.push({column:s.identifier,conditionType:t,value:e}),n}}class xs extends ws{constructor(){super(...arguments),this.handleChange=e=>{const t=this.updateFilters(e.length?e:"","in");this.props.onChange(t)}}render(){let e=[];this.props.column.options.map((t=>{e.push({label:t.label,value:t.value})}));const t=this.getValue("in"),s=this.getValue("in")?t:[];return n.createElement(Ke,{label:this.props.column.label,options:e,selected:s,onChange:this.handleChange})}}class Ms extends ws{constructor(){super(...arguments),this.handleChange=e=>{const t=this.updateFilters(e,"like");this.props.onChange(t)}}render(){return n.createElement(ke.n,{autoComplete:"off",label:this.props.column.label,value:this.getValue("like"),onChange:this.handleChange})}}class Rs extends ws{constructor(){super(...arguments),this.handleChange=(e,t)=>{const s=this.updateFilters(e,t);this.props.onChange(s)}}render(){const e=n.createElement(ke.n,{autoComplete:"off",label:"",prefix:"from",value:this.getValue("gteq"),onChange:e=>{this.handleChange(e,"gteq")}}),t=n.createElement(ke.n,{autoComplete:"off",label:"",prefix:"to",connectedLeft:e,value:this.getValue("lteq"),onChange:e=>{this.handleChange(e,"lteq")}});return n.createElement(He.jN,{label:this.props.column.label,id:this.props.column.identifier},t)}}class zs extends n.PureComponent{constructor(){super(...arguments),this.state={filters:[],columns:[],selector:!1},this.handleChange=e=>{this.setState({filters:e})},this.handleApply=()=>{this.props.onApply(this.state.filters)},this.handleCancel=()=>{this.props.onCancel()},this.onSelectFilters=e=>{const t=l().map(e,(e=>e.identifier));this.setState({columns:t}),this.toggleSelector()},this.toggleSelector=()=>{this.setState({selector:!this.state.selector})}}componentWillReceiveProps(e){this.setState({filters:e.filters})}render(){if(!this.props.active)return null;const e=l().union(this.props.columns,this.state.columns).map((e=>d.getColumn(e))).map((e=>this.renderFilter(e))),t=n.createElement(Ie.z,{onClick:this.toggleSelector},"Additional Filters");return n.createElement(tt.z,{sectioned:!0,subdued:!0},n.createElement(Be.D,{vertical:!0},n.createElement("div",{className:"filters-Filters_3SbMJ"},e),n.createElement(Be.D,null,n.createElement(Be.D.Item,{fill:!0},n.createElement(Zt,{scope:"",open:this.state.selector,activator:t,limit:30,selectedColumns:[],columns:d.idToList(d.getColumns()),onChange:this.onSelectFilters,onClose:this.toggleSelector})),n.createElement(Ge.h,null,n.createElement(Ie.z,{onClick:this.handleCancel},"Cancel"),n.createElement(Ie.z,{primary:!0,onClick:this.handleApply},"Apply Filters")))))}renderFilter(e){let t;switch(e.filterType){case"textRange":case"dateRange":t=n.createElement(Rs,{filters:this.state.filters,column:e,onChange:this.handleChange});break;case"text":t=n.createElement(Ms,{filters:this.state.filters,column:e,onChange:this.handleChange});break;case"select":t=n.createElement(xs,{filters:this.state.filters,column:e,onChange:this.handleChange});break;default:t=n.createElement("p",null,e.filterType)}return n.createElement("div",{key:e.identifier},t)}}class Ps extends n.Component{constructor(){super(...arguments),this.handleClick=()=>{this.props.onClick()}}render(){return n.createElement(Ie.z,{pressed:this.props.active,onClick:this.handleClick},"Manage filters")}}class js extends n.Component{constructor(){super(...arguments),this.state={isActive:!1},this.toggle=()=>{this.setState({isActive:!this.state.isActive})},this.onChange=e=>{const t=l().map(e,(e=>e.identifier));this.props.onChange(t),this.onClose()},this.onClose=()=>{this.setState({isActive:!1})}}render(){const e=n.createElement(Ie.z,{pressed:this.state.isActive,onClick:this.toggle},"Edit columns");return n.createElement(Zt,{open:this.state.isActive,scope:"",activator:e,limit:30,selectedColumns:d.idToList(this.props.selectedColumns),columns:d.idToList(this.props.columns),onChange:this.onChange,onClose:this.onClose})}}class Ts extends n.Component{constructor(){super(...arguments),this.handleClick=()=>{this.props.onChange([])},this.handleRemove=e=>{let t=l().clone(this.props.filters);t=l().reject(t,{column:e}),this.props.onChange(t)}}render(){return this.getFilters().length?n.createElement("div",{className:"admin__data-grid-filters-current _show"},n.createElement("div",{className:"admin__current-filters-title-wrap"},n.createElement("span",{className:"admin__current-filters-title"},"Active filters:")),n.createElement("div",{className:"admin__current-filters-list-wrap"},n.createElement("ul",{className:"admin__current-filters-list"},this.renderFilters())),n.createElement("div",{className:"admin__current-filters-actions-wrap"},n.createElement("button",{className:"action-tertiary action-clear",onClick:this.handleClick},"Clear all"))):null}renderFilters(){return this.getFilters().map(((e,t)=>{const s=d.getColumn(e.column);let a="";switch(e.conditionType){case"gt":case"gteq":a="from";break;case"lt":case"lteq":a="to"}const r=l().isArray(e.value)?e.value.join(", "):e.value;return n.createElement("li",{key:t},n.createElement("span",null,s.label,": "),n.createElement("span",null,a," ",r),n.createElement("button",{className:"action-remove",onClick:()=>{this.handleRemove(s.identifier)}},n.createElement("span",null,"Remove")))}))}getFilters(){const e=[];return l().each(this.props.filters,(t=>{-1==l().indexOf(this.props.primaryFilters,t.column)&&e.push(t)})),e}}var Os=s(129),As=s.n(Os);class Ls extends n.Component{constructor(){super(...arguments),this.state={isActive:!1},this.toggleActive=()=>{this.setState({isActive:!this.state.isActive})},this.selectType=e=>{this.setState({isActive:!1});const{report:t}=this.props,s=Object.assign(Object.assign({type:e},t.state),{filters:l().union(t.state.filters,t.schema.internalFilters)});window.location.href=p.getReportDataProvider().exportUrl+"?"+As().stringify(s)}}render(){const{isActive:e}=this.state,t=n.createElement(Ie.z,{onClick:this.toggleActive,pressed:e,icon:Bt.xqY,disclosure:!0},"Export"),s=[{content:"CSV",onAction:this.selectType.bind(this,"csv")},{content:"Excel XML",onAction:this.selectType.bind(this,"xml")}];return n.createElement("div",null,n.createElement(We.J,{active:e,activator:t,onClose:this.toggleActive},n.createElement(rt.S,{items:s})))}}class Bs extends n.Component{constructor(){super(...arguments),this.state={isFiltersActive:!1},this.handleFiltersButtonClick=()=>{this.setState({isFiltersActive:!this.state.isFiltersActive})},this.handlePager=(e,t)=>{ne.dispatch(x.updateState({currentPage:e,pageSize:t})),x.request()},this.handleColumns=e=>{ne.dispatch(x.updateState({columns:e})),x.request()},this.handleApplyFilters=e=>{ne.dispatch(x.updateState({filters:e})),x.request(),this.setState({isFiltersActive:!1})},this.handleCancelFilters=()=>{this.setState({isFiltersActive:!1})},this.handleSortOrders=e=>{ne.dispatch(x.updateState({sortOrders:e})),x.request()}}render(){const{state:e,schema:t}=this.props.reportState.report,{response:s}=this.props.reportState;let a=l().reject(l().union(e.dimensions,e.columns),(e=>l().indexOf(t.primaryFilters,e)>=0));return n.createElement(tt.z,null,n.createElement(tt.z.Section,null,n.createElement(Be.D,{vertical:!0},n.createElement(Be.D,null,n.createElement(Be.D.Item,{fill:!0},n.createElement(Ps,{active:this.state.isFiltersActive,onClick:this.handleFiltersButtonClick})),n.createElement(js,{selectedColumns:e.columns,columns:t.applicableColumns,onChange:this.handleColumns}),n.createElement(Ls,{report:this.props.reportState.report})),n.createElement(zs,{active:this.state.isFiltersActive,filters:e.filters,columns:a,onApply:this.handleApplyFilters,onCancel:this.handleCancelFilters}),n.createElement(Ts,{primaryFilters:t.primaryFilters,filters:e.filters,onChange:this.handleApplyFilters}))),this.renderTable(),n.createElement(Ht,{size:s?s.size:0,currentPage:e.currentPage,pageSize:e.pageSize,onChange:this.handlePager}))}renderTable(){const{error:e}=this.props.reportState;return e?n.createElement("div",{className:"grid-Error_3puE-"},n.createElement("strong",null,"Wrong configuration. Please change report building conditions."),n.createElement("p",null,e)):n.createElement(ks,{report:this.props.reportState,onChangeSortOrders:this.handleSortOrders})}}const Ns=(0,r.$j)((e=>({reportState:e.reportState})))(Bs);class Fs extends n.Component{constructor(){super(...arguments),this.state={manage:!1},this.onDimensionClick=e=>{let t=l().clone(this.props.dimensions);t[0]=e,t=l().uniq(t),this.props.onChange(t)},this.onChangeDimensions=e=>{const t=l().map(e,(e=>e.identifier));this.props.onChange(t),this.setState({manage:!1})},this.onChangeSelectable=e=>{this.onDimensionClick(e)},this.onManageClick=()=>{this.setState({manage:!0})},this.onCloseAside=()=>{this.setState({manage:!1})}}render(){return n.createElement(Be.D,{alignment:"center"},this.renderSelectedDimensions(),this.renderPrimaryDimensions())}renderSelectedDimensions(){if(this.props.dimensions.length<2)return null;const e=this.props.dimensions.map((e=>{const t=d.getColumn(e);return n.createElement(Ss,{key:e,column:t},n.createElement(ct.C,{status:"info"},t.label))}));return n.createElement(Be.D,{spacing:"extraTight"},e)}renderPrimaryDimensions(){let e;if(this.props.primaryDimensions.length<=1)return null;if(this.props.primaryDimensions.length<=6)return e=this.props.primaryDimensions.map((e=>{const t=d.getColumn(e),s=-1!==l().indexOf(this.props.dimensions,e);return n.createElement(Ie.z,{key:e,pressed:s,onClick:()=>this.onDimensionClick(e)},t.label)})),n.createElement(Ge.h,{segmented:!0},e);{const t=this.props.primaryDimensions.map((e=>({label:d.getColumn(e).label,value:e})));e=n.createElement(de.P,{label:"Group by",labelInline:!0,value:this.props.dimensions[0],onChange:this.onChangeSelectable,options:t})}return n.createElement("div",null,e)}}class _s extends n.Component{constructor(){super(...arguments),this.onChangeDimensions=e=>{ne.dispatch(x.updateState({dimensions:e})),x.request()}}render(){const{report:e}=this.props.reportState;return n.createElement(Fs,{dimensions:e.state.dimensions,primaryDimensions:e.schema.primaryDimensions,applicableDimensions:e.schema.applicableDimensions,onChange:this.onChangeDimensions})}}const Hs=(0,r.$j)((e=>({reportState:e.reportState})))(_s);var Is=s(4450);class Ws extends n.Component{constructor(){super(...arguments),this.onChange=e=>{const{filters:t}=this.props;let s;const n=d.getColumn(this.props.identifier).options;if(e.length){switch(e.indexOf("--all--")){case 0:(e=n.map((function(e){return e.value}))).push("--all--");break;case-1:e.length==n.length&&e.push("--all--");break;default:e=e.filter((function(e){return"--all--"!=e}))}s=Wt.ensureFilter(t,{column:this.props.identifier,conditionType:"in",value:e})}else s=Wt.removeFilter(t,{column:this.props.identifier,conditionType:"in"});this.props.onChange(s)}}render(){const e=d.getColumn(this.props.identifier);if(e.options.length<=1)return null;const t=Wt.getFilter(this.props.filters,{column:this.props.identifier,conditionType:"in"});let s=t?t.value:[];s=""==s?[]:s,l().isArray(s)||(s=s.split(","));let a=l().clone(e.options);return a=l().map(a,(e=>(l().isArray(e.value)&&(e.value=e.value.join(",")),e))),a.unshift({label:"Select All",value:"--all--"}),n.createElement(Ke,{label:e.label,labelHidden:!0,selected:s,options:a,onChange:this.onChange})}}class Vs extends n.Component{constructor(){super(...arguments),this.state={popover:!1},this.applyFilters=e=>{this.props.onChange(e)},this.togglePopover=()=>{this.setState({popover:!this.state.popover})},this.renderFilters=e=>l().without(l().map(this.props.columns,(t=>{const s=d.getColumn(t);if(!s||this.isApplied(t)!==e)return null;let a;switch(s.filterType){case"dateRange":a=n.createElement(es,{key:t,identifier:t,filters:this.props.filters,reportState:this.props.reportState,boardState:null,onChange:this.applyFilters});break;case"select":a=n.createElement(Ws,{key:t,identifier:t,filters:this.props.filters,onChange:this.applyFilters})}return a})),null),this.isApplied=e=>"dateRange"===d.getColumn(e).filterType||!!Wt.getFilter(this.props.filters,{column:e})}render(){const e=this.renderFilters(!0),t=this.renderFilters(!1),s=n.createElement(lt.u,{content:"More Filters"},n.createElement(Ie.z,{onClick:this.togglePopover,plain:!0,pressed:this.state.popover,icon:Is.S})),a=t.length?n.createElement(We.J,{active:this.state.popover,activator:s,onClose:this.togglePopover,sectioned:!0},n.createElement(Be.D,{wrap:!0},this.renderFilters(!1))):null;return n.createElement(Be.D,{spacing:"tight",alignment:"center"},e,a)}}class Ks extends n.PureComponent{constructor(){super(...arguments),this.handleFilters=e=>{ne.dispatch(x.updateState({filters:e})),x.request()}}render(){const{report:e}=this.props.reportState;return n.createElement(Vs,{columns:e.schema.primaryFilters,filters:e.state.filters,reportState:e.state,onChange:this.handleFilters})}}const qs=(0,r.$j)((e=>({reportState:e.reportState})))(Ks),Us="share-ShareLinkBlock_2qnB2";var Ys=s(956),Gs=s(6347),Js=s(2500),$s=s(3496);class Xs{constructor(){this.uid=(0,$s.Hy)("message")}addErrorMessage(e,t){let s=JSON.parse(e);"object"==typeof s&&null!==s?s=s.message?s.message:s.response&&s.response.data?s.response.data.indexOf("Saving is not allowed in demo version")>=0?"Saving is not allowed in demo version":s.response.data.substring(0,1e3)+"...":JSON.stringify(s):Array.isArray(s)&&(s=s.join("; "));const n=this.prepareMessage(s,t);return n.type="error",ne.dispatch(V.pushMessage(n)),n.id}addMessage(e,t){const s=this.prepareMessage(e,t);return s.type="note",ne.dispatch(V.pushMessage(s)),s.id}prepareMessage(e,t){return{id:t||this.uid(),duration:5e3,time:Date.now(),type:"note",content:e}}}const Zs=new class{constructor(){this.backdropIndex=1e3,this.MessageManager=new Xs}};class Qs extends n.PureComponent{constructor(){super(...arguments),this.state={showModal:!1,activeFormat:"csv",isLoading:!1},this.modalClose=()=>{this.setState({showModal:!1})},this.changeModalVisibility=()=>{this.setState({showModal:!this.state.showModal})},this.setActiveFormat=e=>{this.setState({activeFormat:e})},this.setHtmlFormat=()=>{this.setActiveFormat("html")},this.setCsvFormat=()=>{this.setActiveFormat("csv")},this.setXmlFormat=()=>{this.setActiveFormat("xml")},this.setJsonFormat=()=>{this.setActiveFormat("json")},this.copyToClipboard=()=>{h()("#share-link").select(),document.execCommand("copy"),h()("#copy-button").focus(),Zs.MessageManager.addMessage("Copied")},this.copyImportdataToClipboard=()=>{h()("#importdata-code").select(),document.execCommand("copy"),h()("#copy-importdata-btn").focus(),Zs.MessageManager.addMessage("Copied")},this.openLink=()=>{const e=h()("#share-link").val();window.open(e,"_blank")},this.toggleReportShare=()=>{this.setState({isLoading:!0}),this.props.onChange({isShareEnabled:!this.props.reportState.report.isShareEnabled}),setTimeout((()=>{this.props.onSave(),this.setState({isLoading:!1})}),500)}}render(){const e=this.props.reportState.report.shareIdentifier||this.props.reportState.response&&this.props.reportState.response.shareIdentifier,t=p.getConfigDataProvider().shareLink+e+"."+this.state.activeFormat,s=this.props.reportState.report.isShareEnabled&&null!=e&&n.createElement(n.Fragment,null,n.createElement("b",null,"Access URL"),n.createElement("div",{className:Us},n.createElement(Be.D,{alignment:"center",spacing:"tight"},n.createElement(Be.D.Item,{fill:!0},n.createElement(ke.n,{id:"share-link",value:t,onChange:()=>{},autoComplete:"off",label:""})),n.createElement(lt.u,{content:"Copy to clipboard"},n.createElement(Ie.z,{icon:Ys.S,id:"copy-button",onClick:this.copyToClipboard})),n.createElement(lt.u,{content:"Open link"},n.createElement(Ie.z,{icon:Gs.S,onClick:this.openLink})))),n.createElement("div",{className:Us},n.createElement(Ge.h,{segmented:!0},n.createElement(Ie.z,{primary:"csv"==this.state.activeFormat,onClick:this.setCsvFormat},"CSV"),n.createElement(Ie.z,{primary:"xml"==this.state.activeFormat,onClick:this.setXmlFormat},"XML"),n.createElement(Ie.z,{primary:"json"==this.state.activeFormat,onClick:this.setJsonFormat},"JSON"),n.createElement(Ie.z,{primary:"html"==this.state.activeFormat,onClick:this.setHtmlFormat},"HTML")))),a=`=IMPORTDATA("${p.getConfigDataProvider().shareLink+e+".csv"}")`,r=this.props.reportState.report.isShareEnabled&&null!=e&&n.createElement(n.Fragment,null,n.createElement(Be.D,{vertical:!0},n.createElement("b",null,"Insert To Google Sheet"),n.createElement("p",null,"Insert the below code into your google sheet and it will automatically import the most recent data from the report every hour:"),n.createElement(Be.D,{alignment:"center",spacing:"tight"},n.createElement(Be.D.Item,{fill:!0},n.createElement(ke.n,{id:"importdata-code",value:a,onChange:()=>{},autoComplete:"off",label:""})),n.createElement(lt.u,{content:"Copy to clipboard"},n.createElement(Ie.z,{icon:Ys.S,id:"copy-importdata-btn",onClick:this.copyImportdataToClipboard}))))),o=n.createElement(at.u,{open:!!this.state.showModal,title:"Quick Access & Sharing",onClose:this.modalClose},n.createElement(at.u.Section,null,n.createElement(ot.l,null,n.createElement("p",null,"Quick access link to report is a great alternative to routine daily exporting."),n.createElement("p",null,"Once you configured the report, you can use a direct link to open the report on any device without opening the admin and always with ",n.createElement("strong",null,"fresh live data"),"."),n.createElement(Ie.z,{loading:this.state.isLoading,onClick:this.toggleReportShare,primary:!this.props.reportState.report.isShareEnabled,disabled:!p.get("BUILDER_SAVE_ENABLED")},this.props.reportState.report.isShareEnabled?"Disable":"Enable"))),s&&n.createElement(at.u.Section,{subdued:!0},s),r&&n.createElement(at.u.Section,{subdued:!0},r));return p.get("BUILDER")&&p.get("BUILDER_SHARE_ENABLED")&&n.createElement("span",{className:"share-ShareButton_U7h5N"},o,n.createElement(lt.u,{content:"Quick Access & Sharing"},n.createElement(Ie.z,{ariaChecked:this.props.reportState.report.isShareEnabled?"true":"false",icon:Js.S,onClick:this.changeModalVisibility})))}}class en extends n.PureComponent{constructor(){super(...arguments),this.state={report:null,isLoading:!1},this.save=()=>{this.setState({isLoading:!0}),setTimeout((()=>{this.props.onSave(),this.updateState()}),500)}}isEnabled(){const e=l().cloneDeep(this.props.reportState.report.state);return this.removeUnusedStateParts(e),!this.props.builderState.active&&!!this.state.report&&!l().isEqual(this.state.report.state,e)}componentDidMount(){this.updateState()}updateState(){const e=l().cloneDeep(this.props.reportState.report);this.removeUnusedStateParts(e.state),this.setState({report:e,isLoading:!1})}removeUnusedStateParts(e){e.chartType="",e.chartColumns=[],e.currentPage=0}render(){return p.get("BUILDER")&&p.get("BUILDER_SAVE_ENABLED")&&n.createElement(Ie.z,{primary:!0,disabled:!this.isEnabled(),onClick:this.save,loading:this.state.isLoading},"Save")}}const tn=(0,r.$j)((e=>({builderState:e.builderState,reportState:e.reportState})))(en),sn=e=>{const t=p.get("BUILDER_SAVE_URL");return new Promise(((s,n)=>{C.post(t,e).then((e=>{!0===e.data.success?s(e.data.message):!1===e.data.success&&n(e.data.message),n(JSON.stringify(e.data))})).catch((e=>{n(JSON.stringify(e))}))}))};class nn extends n.PureComponent{constructor(){super(...arguments),this.handleChange=e=>{this.props.onChange({name:e})}}render(){const{report:e}=this.props;return n.createElement(ot.l,null,n.createElement(ke.n,{label:"Title",value:e.name,onChange:this.handleChange,autoComplete:"off"}))}}class an extends n.PureComponent{constructor(){super(...arguments),this.onColumnsChange=e=>{this.props.onChange(e)}}render(){return n.createElement(ts,{label:this.props.title,helpText:this.props.helpText,columns:this.props.columns,allColumns:this.props.applicableColumns,limit:30,onChange:this.onColumnsChange})}}class rn extends n.PureComponent{constructor(){super(...arguments),this.onChangeColumn=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{column:e[0]}))},this.onChangeCondition=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{conditionType:e}))},this.onChangeValue=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{value:e}))},this.onChangeMultiValue=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{value:e}))}}render(){const{filter:e}=this.props,t=d.getColumns();return n.createElement(Be.D,{spacing:"tight"},n.createElement(ts,{label:"",columns:[e.column],allColumns:t,onChange:this.onChangeColumn,limit:1}),this.renderConditions(),this.renderValue(),n.createElement(Ie.z,{icon:Ze.S,onClick:this.props.onRemove}))}renderConditions(){const{filter:e}=this.props;let t;switch(d.getColumn(e.column).filterType){case"text":t=[{label:"contains",value:"like"},{label:"doesn't contains",value:"nlike"}];break;case"select":t=[{label:"is one of",value:"in"},{label:"is not",value:"nin"}];break;case"dateRange":case"textRange":t=[{label:">",value:"gt"},{label:">=",value:"gteq"},{label:"<",value:"lt"},{label:"<=",value:"lteq"},{label:"==",value:"eq"},{label:"!=",value:"neq"}];break;default:t=[]}return-1===l().findIndex(t,{value:e.conditionType})&&this.onChangeCondition(t[0].value),n.createElement(de.P,{label:"",options:t,placeholder:"Select condition",value:e.conditionType,onChange:this.onChangeCondition})}renderValue(){const{filter:e}=this.props,t=d.getColumn(e.column);switch(t.filterType){case"text":case"textRange":case"dateRange":return n.createElement(ke.n,{label:"",autoComplete:"off",value:e.value,onChange:this.onChangeValue,placeholder:"Value"});case"select":return n.createElement(Ke,{label:"",selected:e.value,onChange:this.onChangeMultiValue,options:t.options})}return null}}class on extends n.PureComponent{constructor(){super(...arguments),this.addFilter=()=>{const e=l().clone(this.props.filters);e.push({column:"",conditionType:"eq",value:""}),this.props.onChange(e)},this.onChangeFilter=(e,t)=>{const s=l().clone(this.props.filters);s[e]=t,this.props.onChange(s)},this.onRemoveFilter=e=>{let t=l().clone(this.props.filters);t.splice(e,1),this.props.onChange(t)}}render(){const e=this.props.filters.map(((e,t)=>n.createElement(rn,{key:t,filter:e,onChange:e=>{this.onChangeFilter(t,e)},onRemove:()=>{this.onRemoveFilter(t)}}))),t={content:"Add Filter",onAction:this.addFilter};return n.createElement(tt.z,{sectioned:!0,title:"Internal Filters",primaryFooterAction:t},n.createElement(Be.D,null,e))}}class ln extends n.PureComponent{constructor(){super(...arguments),this.closeBuilder=()=>{window.location.reload()},this.saveBuilder=()=>{const{report:e}=this.props.reportState,t=Zs.MessageManager.addMessage("Saving report...");sn({identifier:e.identifier,title:e.name,primaryDimensions:e.schema.primaryDimensions,columns:e.state.columns,primaryFilters:e.schema.primaryFilters,dimensions:e.state.dimensions,internalFilters:e.schema.internalFilters,isShareEnabled:e.isShareEnabled,sortOrders:e.state.sortOrders,filters:[],pageSize:20,timeRange:e.state.timeRange}).then((e=>{Zs.MessageManager.addMessage(e,t),x.request()})).catch((e=>{Zs.MessageManager.addErrorMessage(e,t)}))},this.handleChange=e=>{ne.dispatch(x.updateReport(e))},this.setColumns=e=>{ne.dispatch(x.updateState({columns:e})),this.updateReport()},this.setDimensions=e=>{ne.dispatch(x.updateState({dimensions:e})),this.updateReport()},this.setPrimaryDimensions=e=>{ne.dispatch(x.updateSchema({primaryDimensions:e})),this.updateReport()},this.setPrimaryFilters=e=>{ne.dispatch(x.updateSchema({primaryFilters:e})),this.updateReport()},this.setFilters=e=>{ne.dispatch(x.updateSchema({internalFilters:e})),this.updateReport()},this.updateReport=()=>{x.request()}}render(){const{report:e}=this.props.reportState,t=d.getColumns(),s=this.applicableDimensions();let a={content:"Save",onAction:this.saveBuilder,disabled:this.props.reportState.isLoading};const r=[{content:"Close",onAction:this.closeBuilder}];return n.createElement(ht.A,null,n.createElement(ht.A.Section,{oneThird:!0},n.createElement(pt.Q,{primaryAction:a,secondaryActions:r}),n.createElement(tt.z,{sectioned:!0,title:"General Information"},n.createElement(nn,{report:e,onChange:this.handleChange})),n.createElement(tt.z,{sectioned:!0,title:"Table"},n.createElement(ot.l,null,n.createElement(an,{title:"Dimensions",helpText:"Columns to group the rows in the table",columns:e.state.dimensions,applicableColumns:s,onChange:this.setDimensions}),n.createElement(an,{title:"Columns",columns:e.state.columns,applicableColumns:t,onChange:this.setColumns}))),n.createElement(tt.z,{sectioned:!0,title:"Toolbar"},n.createElement(ot.l,null,n.createElement(an,{title:"Primary Filters",columns:e.schema.primaryFilters,applicableColumns:t,onChange:this.setPrimaryFilters}))),n.createElement(on,{filters:e.schema.internalFilters,onChange:this.setFilters})),n.createElement(ht.A.Section,null,n.createElement(mt,null)))}applicableDimensions(){const e=d.columns(),t=[];return l().each(e,(e=>{"none"===e.aggregator&&"money"!==e.type&&t.push(e.identifier)})),t}}const cn=(0,r.$j)((e=>({builderState:e.builderState,reportState:e.reportState})))(ln);class hn extends n.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.toggleMenu=()=>{this.setState({active:!this.state.active})},this.duplicate=()=>{const e=p.get("BUILDER_DUPLICATE_URL"),t={identifier:this.props.reportState.report.identifier};window.location.href=e+"?"+As().stringify(t),this.toggleMenu()},this.delete=()=>{const e=p.get("BUILDER_DELETE_URL"),t={identifier:this.props.reportState.report.identifier};window.location.href=e+"?"+As().stringify(t),this.toggleMenu()},this.edit=()=>{ne.dispatch(P.setActive(!0)),this.toggleMenu()}}render(){const e=n.createElement(Ie.z,{onClick:this.toggleMenu,plain:!0,pressed:this.state.active,icon:Bt.Hhm}),t=this.props.reportState.report.identifier,s=[{content:"Edit report",onAction:this.edit},{content:"Make a copy",onAction:this.duplicate},{content:"Delete report",onAction:this.delete,disabled:!this.props.reportState.report.isCustomized&&l().isNaN(parseInt(t))}];return p.get("BUILDER")&&p.get("BUILDER_SAVE_ENABLED")&&n.createElement(We.J,{active:this.state.active,activator:e,onClose:this.toggleMenu},n.createElement(rt.S,{items:s}))}}const pn=(0,r.$j)((e=>({reportState:e.reportState,builderState:e.builderState})))(hn);class dn extends n.PureComponent{constructor(){super(...arguments),this.saveReport=()=>{const{report:e}=this.props.reportState,t=Zs.MessageManager.addMessage("Saving...");sn({identifier:e.identifier,title:e.name,primaryDimensions:e.schema.primaryDimensions,columns:e.state.columns,primaryFilters:e.schema.primaryFilters,dimensions:e.state.dimensions,internalFilters:e.schema.internalFilters,isShareEnabled:e.isShareEnabled,sortOrders:e.state.sortOrders,filters:e.state.filters,pageSize:e.state.pageSize,timeRange:e.state.timeRange}).then((e=>{Zs.MessageManager.addMessage(e,t),x.request()})).catch((e=>{Zs.MessageManager.addErrorMessage(e,t)}))},this.updateReport=e=>{ne.dispatch(x.updateReport(e))}}render(){const{reportState:e}=this.props;return n.createElement(Be.D,{alignment:"center"},n.createElement(Be.D.Item,{fill:!0},n.createElement(Be.D,{alignment:"center",spacing:"extraLoose"},n.createElement(qs,null),n.createElement(Hs,null))),n.createElement(Be.D.Item,null,n.createElement(Be.D,{alignment:"center"},n.createElement(tn,{onSave:this.saveReport}),n.createElement(Qs,{reportState:e,onSave:this.saveReport,onChange:this.updateReport}))),n.createElement(Be.D.Item,null,n.createElement(pn,null)))}}const un=(0,r.$j)((e=>({reportState:e.reportState})))(dn);var mn=s(7351);class gn extends n.PureComponent{constructor(){super(...arguments),this.state={active:!1},this.selectBoard=e=>{this.props.onChangeBoard(e.identifier)},this.toggleMenu=()=>{this.setState({active:!this.state.active})}}render(){if(!this.props.visible)return null;const e=[];l().each(this.props.boards,(t=>{e.push({content:t.title,onAction:()=>{this.selectBoard(t)}})}));const t=[{content:"Add New Board",onAction:this.props.onAddBoard,disabled:this.props.locked}];return n.createElement(We.J,{active:this.state.active,activator:this.renderActivator(),onClose:this.toggleMenu,preferredPosition:"below",fullWidth:!0},n.createElement(We.J.Pane,null,n.createElement(rt.S,{items:e,onActionAnyItem:this.toggleMenu})),n.createElement(We.J.Pane,{fixed:!0},n.createElement(rt.S,{items:t,onActionAnyItem:this.toggleMenu})))}renderActivator(){const e=l().find(this.props.boards,{identifier:this.props.activeIdentifier});return e?n.createElement(Ie.z,{disclosure:!0,onClick:this.toggleMenu,icon:mn.S,pressed:this.state.active},e.title):n.createElement("div",null,"...")}}class bn extends n.PureComponent{constructor(){super(...arguments),this.updateFilters=e=>{if(e.timeRange){const t=l().find(Se,{value:e.timeRange});let s=[];t&&(s=[{column:"DATE",conditionType:"gteq",value:m.toMysqlFormat(t.range.startDate,!1)},{column:"DATE",conditionType:"lteq",value:m.toMysqlFormat(t.range.endDate,!0)}],ne.dispatch(I.setFilters(s)))}},this.setActiveBoard=e=>{ne.dispatch(I.selectBoard(e));const t=l().find(this.props.dashboardState.boards,{identifier:e});t&&this.updateFilters(t)},this.addBoard=()=>{const e=J.getEmptyBoard();ne.dispatch(I.addBoard(e)),ne.dispatch(I.selectBoard(e.identifier)),ne.dispatch(I.editBoard(e.identifier))}}componentWillMount(){const e=p.getDashboardDataProvider(),t=e.boards.map((e=>J.stabilizeBoard(e)));0===t.length&&t.push(J.getEmptyBoard()),ne.dispatch(I.setBoards(t));let s=l().find(t,{identifier:e.activeBoard});s||(s=l().find(t,{isDefault:!0})),s||(s=l().first(t)),s&&(ne.dispatch(I.selectBoard(s.identifier)),this.updateFilters(s))}render(){const{dashboardState:e}=this.props;return n.createElement("div",null,n.createElement(wa,null,n.createElement(gn,{visible:!p.isMobileDashboard(),boards:e.boards,activeIdentifier:e.identifier,locked:e.locked,onChangeBoard:this.setActiveBoard,onAddBoard:this.addBoard})),n.createElement(fa,null),n.createElement(jn,null),n.createElement(Ma,null))}}const Cn=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(bn);var vn,fn=s(5697);!function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.LeftArrow=37]="LeftArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.DownArrow=40]="DownArrow",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Key0=48]="Key0",e[e.Key1=49]="Key1",e[e.Key2=50]="Key2",e[e.Key3=51]="Key3",e[e.Key4=52]="Key4",e[e.Key5=53]="Key5",e[e.Key6=54]="Key6",e[e.Key7=55]="Key7",e[e.Key8=56]="Key8",e[e.Key9=57]="Key9",e[e.KeyA=65]="KeyA",e[e.KeyB=66]="KeyB",e[e.KeyC=67]="KeyC",e[e.KeyD=68]="KeyD",e[e.KeyE=69]="KeyE",e[e.KeyF=70]="KeyF",e[e.KeyG=71]="KeyG",e[e.KeyH=72]="KeyH",e[e.KeyI=73]="KeyI",e[e.KeyJ=74]="KeyJ",e[e.KeyK=75]="KeyK",e[e.KeyL=76]="KeyL",e[e.KeyM=77]="KeyM",e[e.KeyN=78]="KeyN",e[e.KeyO=79]="KeyO",e[e.KeyP=80]="KeyP",e[e.KeyQ=81]="KeyQ",e[e.KeyR=82]="KeyR",e[e.KeyS=83]="KeyS",e[e.KeyT=84]="KeyT",e[e.KeyU=85]="KeyU",e[e.KeyV=86]="KeyV",e[e.KeyW=87]="KeyW",e[e.KeyX=88]="KeyX",e[e.KeyY=89]="KeyY",e[e.KeyZ=90]="KeyZ",e[e.LeftMeta=91]="LeftMeta",e[e.RightMeta=92]="RightMeta",e[e.Select=93]="Select",e[e.Numpad0=96]="Numpad0",e[e.Numpad1=97]="Numpad1",e[e.Numpad2=98]="Numpad2",e[e.Numpad3=99]="Numpad3",e[e.Numpad4=100]="Numpad4",e[e.Numpad5=101]="Numpad5",e[e.Numpad6=102]="Numpad6",e[e.Numpad7=103]="Numpad7",e[e.Numpad8=104]="Numpad8",e[e.Numpad9=105]="Numpad9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Semicolon=186]="Semicolon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.BackSlash=220]="BackSlash",e[e.CloseBracket=221]="CloseBracket",e[e.SingleQuote=222]="SingleQuote"}(vn||(vn={})),fn.bool;class yn extends n.PureComponent{render(){const{response:e,config:t}=this.props;if(!e||!t)return null;if(!t.sparkLine)return null;const s=e.items.map((t=>t.formattedData[e.request.dimensions[0]])),a=d.getColumn(t.column),r=l().map(e.items,(e=>parseFloat(e.data[a.identifier]))),o=[{identifier:a.identifier,dataType:"number",label:a.label,borderColor:"#49BEDF",backgroundOpacity:.3,pointRadius:0,borderWidth:1,fill:!0,hidden:!1,data:r}];return n.createElement("div",{className:"sparkLine-Wrapper_wUaBL"},n.createElement(Oe,{visible:!0,type:"line",labels:s,columns:o,height:50,gridLines:!1,axes:!1}))}}class En extends n.PureComponent{render(){const e=this.getValue();return n.createElement("div",null,n.createElement("div",{className:"value-Value_1Qsgv"},!1!==e?e:"-"),this.renderComparsion())}getValue(){const{config:e,response:t}=this.props;return!!t&&t.totals.formattedData[e.column]}renderComparsion(){const e=this.getComparison();if(!1===e)return null;const t=oe()("value-CompareValue__gGo_",e>0&&"value-Positive_1guMD",e<0&&"value-Negative_3apbo");return n.createElement("div",{className:t},e>0?"+":"-",Math.abs(e).toFixed(1),"%")}getComparison(){const{config:e,response:t}=this.props;if(!t)return!1;const s=parseFloat(t.totals.data[e.column]),n=parseFloat(t.totals.data["C|"+e.column]);return!(!n||!s)&&100*(s/n-1)}}class Sn extends n.PureComponent{render(){const{block:e,response:t}=this.props;return n.createElement("div",{className:"singleRenderer-Wrapper_XPBxR"},n.createElement(En,{response:t,config:e.config.single}),n.createElement(yn,{response:t,config:e.config.single}))}}class Dn extends n.PureComponent{render(){const{response:e}=this.props;if(!e)return null;const t=e.columns.map((e=>{const t=d.getColumn(e);return{accessor:t.identifier,align:"left",label:t.label,column:t,sort:null}})),s=[];return l().each(e.items,(e=>{s.push(e)})),n.createElement("div",{className:"table-Container_LeSsT"},n.createElement(_e,{columns:t,rows:s,totals:!1}))}}class kn extends n.PureComponent{render(){return n.createElement("div",{className:"tableRenderer-Wrapper_3WJLV"},n.createElement(Dn,{response:this.props.response}))}}class wn extends n.PureComponent{render(){const{block:e,response:t}=this.props,s=e.config.chart;if(!t)return null;const a=t.items.map((e=>e.formattedData[t.request.dimensions[0]])),r=l().map(s.columns,((e,s)=>{const n=d.getColumn(e),a=l().map(t.items,(e=>parseFloat(e.data[n.identifier])));return{identifier:n.identifier,dataType:n.type,borderColor:Oe.getColor(s),fill:!1,label:n.label,borderWidth:2,pointRadius:0,hidden:!1,data:a}})),o=l().map(s.columns,((e,s)=>{const n=d.getColumn(e),a=l().map(t.items,(e=>parseFloat(e.data["C|"+n.identifier])));return{identifier:"C|"+n.identifier,dataType:n.type,borderColor:Oe.getColor(s),fill:!1,label:n.label+" (previous)",borderWidth:2,pointRadius:0,borderDash:[3,3],hidden:!1,data:a}}));return n.createElement("div",{className:"chartRenderer-Container_1vSrc"},n.createElement("div",{className:"chartRenderer-Chart_1OWqu"},n.createElement(Oe,{visible:!0,type:"line",height:10*e.size[1]-20,labels:a,columns:l().union(r,o),gridLines:!0,axes:!0})),this.renderTotals())}renderTotals(){const{block:e,response:t}=this.props;if(!t)return null;const s=e.config.chart,a=l().map(s.columns,(e=>{const s=d.getColumn(e);return n.createElement("div",{key:e,className:"chartRenderer-Total_1lxGg"},n.createElement("strong",null,s.label),n.createElement("span",null,t.totals.formattedData[e]))}));return n.createElement("div",{className:"chartRenderer-Totals_3tGou"},a)}}class xn extends n.PureComponent{render(){const{block:e,response:t}=this.props,s=e.config.html;return t?n.createElement("div",{className:"htmlRenderer-Container_1aqmq",dangerouslySetInnerHTML:{__html:s.content}}):null}}let Mn=0;class Rn extends n.PureComponent{constructor(){super(...arguments),this.state={edit:!1,response:null,loading:!1},this.toggleEdit=()=>{this.setState({edit:!this.state.edit})},this.closeEdit=()=>{this.setState({edit:!1})},this.setLoading=e=>{this.setState({loading:e})}}componentWillMount(){this.request()}componentDidUpdate(e){l().isEqual(this.props.dashboardState.filters,e.dashboardState.filters)&&l().isEqual(this.props.block,e.block)||this.request()}render(){const{block:e,dashboardState:t}=this.props;let s;"single"==e.config.renderer?s=n.createElement(Sn,{block:e,filters:t.filters,response:this.state.response}):"table"==e.config.renderer?s=n.createElement(kn,{block:e,filters:t.filters,response:this.state.response}):"chart"==e.config.renderer?s=n.createElement(wn,{block:e,filters:t.filters,response:this.state.response}):"html"==e.config.renderer&&(s=n.createElement(xn,{block:e,response:this.state.response}));const a=oe()("block-SpinnerWrapper_3jEmy",this.state.loading&&"block-Visible_io4oO");return n.createElement("div",{className:"block-Wrapper_3Fo5A"},this.renderDescription(),this.renderDateRange(),n.createElement("div",{className:"block-Header_29TYD"},n.createElement("strong",null,e.title),this.renderControls()),n.createElement("div",{className:a},n.createElement(et.$,null)),s)}renderDescription(){const{block:e}=this.props;return e.description?n.createElement(lt.u,{content:e.description},n.createElement("div",{className:"block-Description_1Ctnf"})):null}renderDateRange(){const{block:e}=this.props;if(!e.config.dateRange.override)return null;const t=l().find(Se,{value:e.config.dateRange.range});return n.createElement(lt.u,{content:t?t.label:""},n.createElement("div",{className:"block-DateRange_3kJRq"}))}renderControls(){const e=this.props.locked?null:n.createElement("div",{className:"block-Handlers_3_k_y"},n.createElement("div",{className:"block-Settings_3Ozpv",onClick:this.toggleEdit},n.createElement(Le.J,{source:Ot(),color:"subdued"})),n.createElement("div",{className:"block-DraggableHandle_1X4e9 DraggableHandle"},n.createElement(Le.J,{source:zt(),color:"subdued"})));return n.createElement(n.Fragment,null,e,n.createElement(Vn,{open:this.state.edit,block:this.props.block,onClose:this.closeEdit}))}request(){this.setLoading(!0),((e,t,s)=>{const n=p.getDashboardDataProvider().endpoint;return new Promise(((a,r)=>{const o=setInterval((()=>{0===Mn&&(clearInterval(o),Mn++,C.post(n+"api/request",{block:e,filters:t,token:s}).then((e=>{Mn--,!0===e.data.success?a(e.data):!1===e.data.success&&r(e.data.message),r(e.data)})).catch((e=>{Mn--,r(e)})))}),100)}))})(this.props.block,this.props.dashboardState.filters,this.props.dashboardState.board.mobileToken).then((e=>{this.setLoading(!1),this.setState({response:e.data})})).catch((e=>{console.log(e),this.setLoading(!1)}))}}const zn=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(Rn);class Pn extends n.PureComponent{constructor(){super(...arguments),this.onTitleChange=e=>{this.setBoardState({title:e})},this.onTypeChange=e=>{this.setBoardState({type:e})},this.onIsDefaultChange=e=>{this.setBoardState({isDefault:e})},this.apply=()=>{const e=this.state.board;ne.dispatch(I.updateBoard(e)),this.close()},this.delete=()=>{const e=this.state.board,t=Zs.MessageManager.addMessage("Removing board...");(e=>{const t=p.getDashboardDataProvider().endpoint;return new Promise(((s,n)=>{C.post(t+"api/delete",{identifier:e}).then((e=>{!0===e.data.success?s(e.data.message):!1===e.data.success&&n(e.data.message),n(e.data)})).catch((e=>{n(e)}))}))})(e.identifier).then((e=>{Zs.MessageManager.addMessage(e,t),window.location.reload(),this.close()})).catch((e=>{Zs.MessageManager.addErrorMessage(e,t)}))},this.close=()=>{ne.dispatch(I.editBoard(!1))}}componentWillMount(){const{board:e}=this.props.dashboardState;this.setState({board:l().clone(e)})}componentWillReceiveProps(e){const{board:t}=e.dashboardState;this.setState({board:l().clone(t)})}render(){const{board:e}=this.state,{dashboardState:t}=this.props,s={content:"Apply",onAction:this.apply},a=[{content:"Cancel",onAction:this.close},{content:"Delete",onAction:this.delete}];return n.createElement(at.u,{open:!!t.editableIdentifier,title:e.title,primaryAction:s,secondaryActions:a,onClose:this.close},n.createElement(at.u.Section,null,n.createElement(ot.l,null,n.createElement(ke.n,{label:"Title",value:e.title,onChange:this.onTitleChange,autoComplete:"off"}),n.createElement(de.P,{label:"Type",value:e.type,options:[{label:"Shared Board",value:"shared"},{label:"Private Board",value:"private"}],onChange:this.onTypeChange,helpText:"Private Board will be available only for current admin user. Shared Board will be available for all admin users."}),n.createElement(st.X,{label:"Is Default",checked:e.isDefault,onChange:this.onIsDefaultChange}))))}setBoardState(e){this.setState({board:Object.assign(Object.assign({},this.state.board),e)})}}const jn=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(Pn);class Tn extends n.PureComponent{constructor(){super(...arguments),this.onChangeColumn=e=>{const t=e.length?e[0]:"";this.props.onChange({config:Object.assign(Object.assign({},this.props.block.config),{single:Object.assign(Object.assign({},this.props.block.config.single),{column:t})})})},this.onChangeSparkLine=e=>{this.props.onChange({config:Object.assign(Object.assign({},this.props.block.config),{single:Object.assign(Object.assign({},this.props.block.config.single),{sparkLine:e})})})},this.onChangeCompare=e=>{this.props.onChange({config:Object.assign(Object.assign({},this.props.block.config),{single:Object.assign(Object.assign({},this.props.block.config.single),{compare:e})})})}}render(){const{single:e}=this.props.block.config,t=d.getColumns({isNumeric:!0,isAggregated:!0,isInternal:!1}),s=e.column?[e.column]:[];return n.createElement(tt.z,{title:"Single Value",sectioned:!0},n.createElement(ot.l,null,n.createElement(ts,{label:"Metric",columns:s,allColumns:t,onChange:this.onChangeColumn,limit:1}),n.createElement(st.X,{label:"Spark line",checked:e.sparkLine,onChange:this.onChangeSparkLine}),n.createElement(de.P,{label:"Comparison",value:e.compare,options:[{label:"Do not compare",value:""},{label:"Previous period",value:"period"},{label:"Same period last week",value:"week"},{label:"Same period last month",value:"month"},{label:"Same period last year",value:"year"}],onChange:this.onChangeCompare})))}}class On extends n.PureComponent{constructor(){super(...arguments),this.onChangeDimensions=e=>{this.updateTableConfig({dimensions:e})},this.onChangeColumns=e=>{this.updateTableConfig({columns:e})},this.onChangePageSize=e=>{const t=parseInt(e);this.updateTableConfig({pageSize:t||30})},this.onChangeSortOrder=e=>{const t=e.split(":");this.updateTableConfig({sortOrders:[{column:t[0],direction:t[1]}]})},this.onChangeBaseTable=e=>{this.updateTableConfig({baseTable:e})}}render(){const e=this.props.block.config.table,t=d.getColumns(),s=e.dimensions,a=e.columns,r=String(e.pageSize),o=e.sortOrders.length>0?`${e.sortOrders[0].column}:${e.sortOrders[0].direction}`:"",i=[];l().each(l().union(s,a),(e=>{const t=d.getColumn(e);i.push({value:`${e}:asc`,label:`${t.label} 0-9`}),i.push({value:`${e}:desc`,label:`${t.label} 9-0`})}));const c=[];return c.push({value:"",label:"Dimension column table"}),l().each(d.tables(),(e=>{e.label!==e.identifier&&c.push({value:`${e.identifier}`,label:`${e.label}`})})),n.createElement(tt.z,{title:"Table",sectioned:!0},n.createElement(ot.l,null,n.createElement(de.P,{label:"Base Table",options:c,value:e.baseTable,onChange:this.onChangeBaseTable}),n.createElement(ts,{label:"Dimensions",helpText:"Column for grouping data in the table",columns:s,allColumns:t,limit:30,onChange:this.onChangeDimensions}),n.createElement(ts,{label:"Columns",columns:a,allColumns:t,limit:30,onChange:this.onChangeColumns}),n.createElement(de.P,{label:"Sorting",options:i,value:o,onChange:this.onChangeSortOrder}),n.createElement(ke.n,{label:"Rows Limit",autoComplete:"off",type:"number",value:r,onChange:this.onChangePageSize})))}updateTableConfig(e){this.props.onChange({config:Object.assign(Object.assign({},this.props.block.config),{table:Object.assign(Object.assign({},this.props.block.config.table),e)})})}}class An extends n.PureComponent{constructor(){super(...arguments),this.onChangeDimension=e=>{0!==e.length&&this.updateConfig({dimension:e[0]})},this.onChangeColumns=e=>{this.updateConfig({columns:e})},this.onChangeCompare=e=>{this.updateConfig({compare:e})}}render(){const e=this.props.block.config.chart,t=d.getColumns();return n.createElement(tt.z,{title:"Chart",sectioned:!0},n.createElement(ot.l,null,n.createElement(ts,{label:"Dimension",helpText:"Column for grouping the data in table",columns:[e.dimension],allColumns:t,limit:1,onChange:this.onChangeDimension}),n.createElement(ts,{label:"Columns",columns:e.columns,allColumns:t,limit:30,onChange:this.onChangeColumns}),n.createElement(de.P,{label:"Comparison",value:e.compare,options:[{label:"Do not compare",value:""},{label:"Previous period",value:"period"},{label:"Same period last week",value:"week"},{label:"Same period last month",value:"month"},{label:"Same period last year",value:"year"}],onChange:this.onChangeCompare})))}updateConfig(e){this.props.onChange({config:Object.assign(Object.assign({},this.props.block.config),{chart:Object.assign(Object.assign({},this.props.block.config.chart),e)})})}}class Ln extends n.PureComponent{constructor(){super(...arguments),this.onChangeTitle=e=>{const{onChange:t}=this.props;t({title:e})},this.onChangeDescription=e=>{const{onChange:t}=this.props;t({description:e})},this.onChangeRenderer=e=>{const{block:t,onChange:s}=this.props;s({config:Object.assign(Object.assign({},t.config),{renderer:e})})}}render(){const{block:e}=this.props;return n.createElement(tt.z,{title:"General Information",sectioned:!0},n.createElement(ot.l,null,n.createElement(ke.n,{label:"Title",value:e.title,onChange:this.onChangeTitle,autoComplete:"off"}),n.createElement(ke.n,{label:"Description",value:e.description,onChange:this.onChangeDescription,autoComplete:"off"}),n.createElement(de.P,{label:"Block Type",value:e.config.renderer,options:[{label:"Single Value",value:"single"},{label:"Table",value:"table"},{label:"Chart",value:"chart"},{label:"HTML",value:"html"}],onChange:this.onChangeRenderer})))}}class Bn extends n.PureComponent{constructor(){super(...arguments),this.onChangeOverride=e=>{const{block:t,onChange:s}=this.props;s({config:Object.assign(Object.assign({},t.config),{dateRange:Object.assign(Object.assign({},t.config.dateRange),{override:e})})})},this.onChangeRange=e=>{const{block:t,onChange:s}=this.props;s({config:Object.assign(Object.assign({},t.config),{dateRange:Object.assign(Object.assign({},t.config.dateRange),{range:e})})})}}render(){const{dateRange:e}=this.props.block.config,t=Se.map((e=>({label:e.label,value:e.value})));return n.createElement(tt.z,{title:"Time Range",sectioned:!0},n.createElement(ot.l,null,n.createElement(st.X,{label:"Override dashboard time",checked:e.override,onChange:this.onChangeOverride}),n.createElement(it.z,{open:e.override,id:"range"},n.createElement(de.P,{label:"Range",value:e.range,options:t,onChange:this.onChangeRange,placeholder:"Select Date Range"}))))}}class Nn extends n.PureComponent{constructor(){super(...arguments),this.onChangeColumn=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{column:e[0],value:""}))},this.onChangeCondition=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{conditionType:e}))},this.onChangeValue=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{value:e}))},this.onChangeMultiValue=e=>{const{filter:t,onChange:s}=this.props;s(Object.assign(Object.assign({},t),{value:e}))}}render(){const{filter:e}=this.props,t=d.getColumns();return n.createElement("div",{className:"filter-Container_1Hosa"},n.createElement("div",{className:"filter-Column_2S_me"},n.createElement(ts,{label:"",columns:[e.column],allColumns:t,onChange:this.onChangeColumn,limit:1})),n.createElement("div",{className:"filter-Condition_2iO_G"},this.renderConditions()),n.createElement("div",{className:"filter-Value_1WsNx"},this.renderValue()),n.createElement("div",{className:"filter-Remove_1gACn"},n.createElement(Ie.z,{icon:n.createElement(Le.J,{source:jt(),color:"subdued"}),size:"slim",onClick:this.props.onRemove})))}renderConditions(){const{filter:e}=this.props;let t;switch(d.getColumn(e.column).filterType){case"text":t=[{label:"contains",value:"like"},{label:"doesn't contains",value:"nlike"}];break;case"select":t=[{label:"is one of",value:"in"},{label:"is not one of",value:"nin"}];break;case"dateRange":case"textRange":t=[{label:">",value:"gt"},{label:">=",value:"gteq"},{label:"<",value:"lt"},{label:"<=",value:"lteq"},{label:"==",value:"eq"},{label:"!=",value:"neq"}];break;default:t=[]}return-1===l().findIndex(t,{value:e.conditionType})&&this.onChangeCondition(t[0].value),n.createElement(de.P,{label:"",options:t,placeholder:"Select condition",value:e.conditionType,onChange:this.onChangeCondition})}renderValue(){const{filter:e}=this.props,t=d.getColumn(e.column);switch(t.filterType){case"text":case"textRange":case"dateRange":return n.createElement(ke.n,{label:"",value:e.value,onChange:this.onChangeValue,placeholder:"Value",autoComplete:"off"});case"select":return n.createElement(Ke,{label:"",selected:e.value,onChange:this.onChangeMultiValue,options:t.options})}return null}}class Fn extends n.PureComponent{constructor(){super(...arguments),this.addFilter=()=>{const{config:e}=this.props.block,t=l().clone(e.filters);t.push({column:"",conditionType:"eq",value:""}),this.props.onChange({config:Object.assign(Object.assign({},e),{filters:t})})},this.onChangeFilter=(e,t)=>{const{config:s}=this.props.block,n=l().clone(s.filters);n[e]=t,this.props.onChange({config:Object.assign(Object.assign({},s),{filters:n})})},this.onRemoveFilter=e=>{const{config:t}=this.props.block;let s=l().clone(t.filters);s.splice(e,1),this.props.onChange({config:Object.assign(Object.assign({},t),{filters:s})})}}render(){const{config:e}=this.props.block,t=e.filters.map(((e,t)=>n.createElement(Nn,{key:t,filter:e,onChange:e=>{this.onChangeFilter(t,e)},onRemove:()=>{this.onRemoveFilter(t)}})));return n.createElement(tt.z,{sectioned:!0,title:"Filters"},n.createElement(ot.l,null,t,n.createElement(Ie.z,{onClick:this.addFilter},"Add Filter")))}}var _n=s(4709),Hn=s(5937);class In extends n.PureComponent{constructor(){super(...arguments),this.onChangeContent=e=>{this.updateConfig({content:e})}}render(){const e=this.props.block.config.html;return n.createElement(tt.z,{title:"HTML",sectioned:!0},n.createElement(ot.l,null,n.createElement("p",null,"Content"),n.createElement(_n.ZP,{className:"htmlRenderer-editor_2d7lH",value:e.content,onChange:this.onChangeContent,extensions:[Hn.s6],minHeight:"200px",maxHeight:"600px"})))}updateConfig(e){this.props.onChange({config:Object.assign(Object.assign({},this.props.block.config),{html:Object.assign({content:this.props.block.config.html.content},e)})})}}class Wn extends n.PureComponent{constructor(){super(...arguments),this.onChangeBlock=e=>{this.setState({block:Object.assign(Object.assign({},this.state.block),e)})},this.apply=()=>{const e=l().clone(this.props.dashboardState.board.blocks);e[l().findIndex(e,{identifier:this.state.block.identifier})]=this.state.block,ne.dispatch(I.updateBoard({blocks:e})),this.props.onClose()},this.delete=()=>{const e=l().reject(this.props.dashboardState.board.blocks,{identifier:this.state.block.identifier});ne.dispatch(I.updateBoard({blocks:e}))}}componentWillMount(){this.setState({block:l().clone(this.props.block)})}render(){const{block:e}=this.state;let t;"single"===e.config.renderer?t=n.createElement(Tn,{block:e,onChange:this.onChangeBlock}):"table"===e.config.renderer?t=n.createElement(On,{block:e,onChange:this.onChangeBlock}):"chart"===e.config.renderer?t=n.createElement(An,{block:e,onChange:this.onChangeBlock}):"html"===e.config.renderer&&(t=n.createElement(In,{block:e,onChange:this.onChangeBlock}));const s={content:"Apply",onAction:this.apply},a=[{content:"Cancel",onAction:this.props.onClose},{content:"Delete",onAction:this.delete,destructive:!0}],r=Qe;return n.createElement(r,{open:this.props.open,title:e.title,onClose:this.props.onClose,primaryAction:s,secondaryActions:a},n.createElement("div",{className:"blockEdit-Container_xsp6J"},n.createElement(Ye.R,{className:"blockEdit-Form_rNBU0",shadow:!0,vertical:!0,horizontal:!1},n.createElement(Ln,{block:e,onChange:this.onChangeBlock}),"html"!==e.config.renderer&&n.createElement(Bn,{block:e,onChange:this.onChangeBlock}),t,"html"!==e.config.renderer&&n.createElement(Fn,{block:e,onChange:this.onChangeBlock})),n.createElement(Ye.R,{className:"blockEdit-Preview_2P-7K",shadow:!0,vertical:!0,horizontal:!1},n.createElement("div",{className:"blockEdit-PreviewInner_2jt3K"},n.createElement(zn,{block:e,locked:!0})))))}}const Vn=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(Wn);var Kn=s(3935);const qn={Wrapper:"gridLayout-Wrapper_2mk8p",wrapper:"gridLayout-Wrapper_2mk8p",UnLocked:"gridLayout-UnLocked_3_S-c",unLocked:"gridLayout-UnLocked_3_S-c",Block:"gridLayout-Block_1snee",block:"gridLayout-Block_1snee"},Un=!1;function Yn(e){let t,s=0;for(let n=0,a=e.length;n<a;n++)t=e[n].y+e[n].h,t>s&&(s=t);return s}function Gn(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable}}function Jn(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function $n(e,t,s){const n=na(e),a=ia(e,t),r=Array(e.length);for(let o=0,i=a.length;o<i;o++){let i=Gn(a[o]);i.static||(i=Qn(n,i,t,s,a),n.push(i)),r[e.indexOf(a[o])]=i,i.moved=!1}return r}const Xn={x:"w",y:"h"};function Zn(e,t,s,n){const a=Xn[n];t[n]+=1;for(let r=e.map((e=>e.i)).indexOf(t.i)+1;r<e.length;r++){const o=e[r];if(!o.static){if(o.y>t.y+t.h)break;Jn(t,o)&&Zn(e,o,s+t[a],n)}}t[n]=s}function Qn(e,t,s,n,a){const r="horizontal"===s;if("vertical"===s)for(t.y=Math.min(Yn(e),t.y);t.y>0&&!ta(e,t);)t.y--;else if(r)for(t.y=Math.min(Yn(e),t.y);t.x>0&&!ta(e,t);)t.x--;let o;for(;o=ta(e,t);)r?Zn(a,t,o.x+o.w,"x"):Zn(a,t,o.y+o.h,"y"),r&&t.x+t.w>n&&(t.x=n-t.w,t.y++);return t}function ea(e,t){for(let s=0,n=e.length;s<n;s++)if(e[s].i===t)return e[s];return null}function ta(e,t){for(let s=0,n=e.length;s<n;s++)if(Jn(e[s],t))return e[s];return null}function sa(e,t){return e.filter((e=>Jn(e,t)))}function na(e){return e.filter((e=>e.static))}function aa(e,t,s,n,a,r,o,i){if(t.static)return e;if(t.y===n&&t.x===s)return e;ca(`Moving element ${t.i} to [${String(s)},${String(n)}] from [${t.x},${t.y}]`);const l=t.x,c=t.y;"number"==typeof s&&(t.x=s),"number"==typeof n&&(t.y=n),t.moved=!0;let h=ia(e,o);("vertical"===o&&"number"==typeof n?c>=n:"horizontal"===o&&"number"==typeof s&&l>=s)&&(h=h.reverse());const p=sa(h,t);if(r&&p.length)return ca(`Collision prevented on ${t.i}, reverting.`),t.x=l,t.y=c,t.moved=!1,e;for(let s=0,n=p.length;s<n;s++){const n=p[s];ca(`Resolving collision between ${t.i} at [${t.x},${t.y}] and ${n.i} at [${n.x},${n.y}]`),n.moved||(e=n.static?ra(e,n,t,a,o,i):ra(e,t,n,a,o,i))}return e}function ra(e,t,s,n,a,r){const o="horizontal"===a,i="horizontal"!==a;if(n){n=!1;const l={x:o?Math.max(t.x-s.w,0):s.x,y:i?Math.max(t.y-s.h,0):s.y,w:s.w,h:s.h,i:"-1",minW:1,minH:1,maxW:1/0,maxH:1/0};if(!ta(e,l))return ca(`Doing reverse collision on ${s.i} up to [${l.x},${l.y}].`),aa(e,s,o?l.x:void 0,i?l.y:void 0,n,!1,a,r)}return aa(e,s,o?s.x+1:void 0,i?s.y+1:void 0,n,!1,a,r)}function oa(e){return 100*e+"%"}function ia(e,t){return"horizontal"===t?function(e){return e.sort(((e,t)=>e.x>t.x||e.x===t.x&&e.y>t.y?1:-1))}(e):function(e){return e.sort(((e,t)=>e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1))}(e)}function la(e,t,s,a){e=e||[];let r=[];return n.Children.forEach(t,((t,s)=>{const n=ea(e,String(t.key));if(n)r[s]=Gn(n);else{const e=t.props["data-grid"]||t.props._grid;r[s]=Gn(e?Object.assign(Object.assign({},e),{i:t.key}):{w:1,h:1,x:0,y:Yn(r),i:String(t.key),minW:1,minH:1,maxW:1/0,maxH:1/0})}})),r=function(e,t){const s=na(e);for(let n=0,a=e.length;n<a;n++){const a=e[n];if(a.x+a.w>t.cols&&(a.x=t.cols-a.w),a.x<0&&(a.x=0,a.w=t.cols),a.static)for(;ta(s,a);)a.y++;else s.push(a)}return e}(r,{cols:s}),r=$n(r,a,s),r}function ca(e){Un&&console.log(e)}const ha=()=>{};var pa=s(5294),da=s(1706);class ua extends n.Component{constructor(){super(...arguments),this.state={className:"",resizing:null,dragging:null}}calcColWidth(){const{margin:e,containerPadding:t,containerWidth:s,cols:n}=this.props;return(s-e[0]*(n-1)-2*t[0])/n}calcPosition(e,t,s,n,a){const{margin:r,containerPadding:o,rowHeight:i}=this.props,l=this.calcColWidth(),c={left:Math.round((l+r[0])*e+o[0]),top:Math.round((i+r[1])*t+o[1]),width:s===1/0?s:Math.round(l*s+Math.max(0,s-1)*r[0]),height:n===1/0?n:Math.round(i*n+Math.max(0,n-1)*r[1])};return a&&a.resizing&&(c.width=Math.round(a.resizing.width),c.height=Math.round(a.resizing.height)),a&&a.dragging&&(c.top=Math.round(a.dragging.top),c.left=Math.round(a.dragging.left)),c}calcXY(e,t){const{margin:s,cols:n,rowHeight:a,w:r,h:o,maxRows:i}=this.props,l=this.calcColWidth();let c=Math.round((t-s[0])/(l+s[0])),h=Math.round((e-s[1])/(a+s[1]));return c=Math.max(Math.min(c,n-r),0),h=Math.max(Math.min(h,i-o),0),{x:c,y:h}}calcWH({height:e,width:t}){const{margin:s,maxRows:n,cols:a,rowHeight:r,x:o,y:i}=this.props,l=this.calcColWidth();let c=Math.round((t+s[0])/(l+s[0])),h=Math.round((e+s[1])/(r+s[1]));return c=Math.max(Math.min(c,a-o),0),h=Math.max(Math.min(h,n-i),0),{w:c,h}}createStyle(e){const{usePercentages:t,containerWidth:s,useCSSTransforms:n}=this.props;let a;return n?a=function({top:e,left:t,width:s,height:n}){const a=`translate(${t}px,${e}px)`;return{transform:a,WebkitTransform:a,MozTransform:a,msTransform:a,OTransform:a,width:`${s}px`,height:`${n}px`,position:"absolute"}}(e):(a=function({top:e,left:t,width:s,height:n}){return{top:`${e}px`,left:`${t}px`,width:`${s}px`,height:`${n}px`,position:"absolute"}}(e),t&&(a.left=oa(e.left/s),a.width=oa(e.width/s))),a}mixinDraggable(e){const t=pa.DraggableCore;return n.createElement(t,{onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop"),handle:this.props.handle,cancel:this.props.cancel,disabled:!this.props.isDraggable},e)}mixinResizable(e,t){const{cols:s,x:a,minW:r,minH:o,maxW:i,maxH:l}=this.props,c=this.calcPosition(0,0,s-a,0).width,h=this.calcPosition(0,0,r,o),p=this.calcPosition(0,0,i,l),d=[h.width,h.height],u=[Math.min(p.width,c),Math.min(p.height,1/0)];return n.createElement(da.Resizable,{width:t.width,height:t.height,minConstraints:d,maxConstraints:u,onResizeStop:this.onResizeHandler("onResizeStop"),onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize"),axis:this.props.isResizable?"both":"none"},e)}onDragHandler(e){return(t,{node:s,deltaX:n,deltaY:a})=>{const r=this.props[e];if(!r)return;const o={top:0,left:0};switch(e){case"onDragStart":{const{offsetParent:e}=s;if(!e)return;const t=e.getBoundingClientRect(),n=s.getBoundingClientRect();o.left=n.left-t.left+e.scrollLeft,o.top=n.top-t.top+e.scrollTop,this.setState({dragging:o});break}case"onDrag":if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");o.left=this.state.dragging.left+n,o.top=this.state.dragging.top+a,this.setState({dragging:o});break;case"onDragStop":if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");o.left=this.state.dragging.left,o.top=this.state.dragging.top,this.setState({dragging:null});break;default:throw new Error("onDragHandler called with unrecognized handlerName: "+e)}const{x:i,y:l}=this.calcXY(o.top,o.left);return r.call(this,this.props.i,i,l,{e:t,node:s,newPosition:o})}}onResizeHandler(e){return(t,{node:s,size:n})=>{const a=this.props[e];if(!a)return;const{cols:r,x:o,i,maxW:l,minW:c,maxH:h,minH:p}=this.props;let{w:d,h:u}=this.calcWH(n);d=Math.min(d,r-o),d=Math.max(d,1),d=Math.max(Math.min(d,l),c),u=Math.max(Math.min(u,h),p),this.setState({resizing:"onResizeStop"===e?null:n}),a.call(this,i,d,u,{e:t,node:s,size:n})}}render(){const{x:e,y:t,w:s,h:a,isDraggable:r,isResizable:o,useCSSTransforms:i}=this.props,l=this.calcPosition(e,t,s,a,this.state),c=n.Children.only(this.props.children);let h=n.cloneElement(c,{className:oe()("grid-GridItem_TT--a",c.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-resizable-enabled":o,"react-draggable":r,"react-draggable-dragging":Boolean(this.state.dragging),cssTransforms:i}),style:Object.assign(Object.assign(Object.assign({},this.props.style),c.props.style),this.createStyle(l))});return h=this.mixinResizable(h,l),h=this.mixinDraggable(h),h}}ua.defaultProps={className:"",cancel:"",handle:""};const ma=ua;class ga extends n.PureComponent{constructor(e,t){var s;super(e,t),this.state={activeDrag:null,layout:la(this.props.layout,this.props.children,this.props.cols,this.compactType()),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null},s=this,["onDragStart","onDrag","onDragStop","onResizeStart","onResize","onResizeStop"].forEach((e=>s[e]=s[e].bind(s)))}componentDidMount(){this.setState({mounted:!0})}componentWillReceiveProps(e){let t;var s,a;if(l().isEqual(e.layout,this.props.layout)&&e.compactType===this.props.compactType?(s=this.props.children,a=e.children,l().isEqual(n.Children.map(s,(e=>e.key)),n.Children.map(a,(e=>e.key)))||(t=this.state.layout)):t=e.layout,t){const s=la(t,e.children,e.cols,this.compactType(e)),n=this.state.layout;this.setState({layout:s}),this.onLayoutMaybeChanged(s,n)}}containerHeight(){if(!this.props.autoSize)return;const e=Yn(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}compactType(e){return e||(e=this.props),!1===e.verticalCompact?null:e.compactType}onDragStart(e,t,s,{e:n,node:a}){const{layout:r}=this.state;var o=ea(r,e);if(o)return this.setState({oldDragItem:Gn(o),oldLayout:this.state.layout}),this.props.onDragStart(r,o,o,null,n,a)}onDrag(e,t,s,{e:n,node:a}){const{oldDragItem:r}=this.state;let{layout:o}=this.state;const{cols:i}=this.props;var l=ea(o,e);if(l){var c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e,minW:1,minH:1,maxW:1/0,maxH:1/0};o=aa(o,l,t,s,!0,this.props.preventCollision,this.compactType(),i),this.props.onDrag(o,r,l,c,n,a),this.setState({layout:$n(o,this.compactType(),i),activeDrag:c})}}onDragStop(e,t,s,{e:n,node:a}){const{oldDragItem:r}=this.state;let{layout:o}=this.state;const{cols:i,preventCollision:l}=this.props,c=ea(o,e);if(!c)return;o=aa(o,c,t,s,!0,l,this.compactType(),i),this.props.onDragStop(o,r,c,null,n,a);const h=$n(o,this.compactType(),i),{oldLayout:p}=this.state;this.setState({activeDrag:null,layout:h,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(h,p)}onLayoutMaybeChanged(e,t){t||(t=this.state.layout),l().isEqual(t,e)||this.props.onLayoutChange(e)}onResizeStart(e,t,s,{e:n,node:a}){const{layout:r}=this.state;var o=ea(r,e);o&&(this.setState({oldResizeItem:Gn(o),oldLayout:this.state.layout}),this.props.onResizeStart(r,o,o,null,n,a))}onResize(e,t,s,{e:n,node:a}){const{layout:r,oldResizeItem:o}=this.state,{cols:i,preventCollision:l}=this.props,c=ea(r,e);if(!c)return;let h;if(l){const e=sa(r,Object.assign(Object.assign({},c),{w:t,h:s})).filter((e=>e.i!==c.i));if(h=e.length>0,h){let t=1/0,s=1/0;e.forEach((e=>{e.x>c.x&&(t=Math.min(t,e.x)),e.y>c.y&&(s=Math.min(s,e.y))})),Number.isFinite(t)&&(c.w=t-c.x),Number.isFinite(s)&&(c.h=s-c.y)}}h||(c.w=t,c.h=s);var p={w:c.w,h:c.h,x:c.x,y:c.y,static:!0,i:e,minW:1,minH:1,maxW:1/0,maxH:1/0};this.props.onResize(r,o,c,p,n,a),this.setState({layout:$n(r,this.compactType(),i),activeDrag:p})}onResizeStop(e,t,s,{e:n,node:a}){const{layout:r,oldResizeItem:o}=this.state,{cols:i}=this.props;var l=ea(r,e);this.props.onResizeStop(r,o,l,null,n,a);const c=$n(r,this.compactType(),i),{oldLayout:h}=this.state;this.setState({activeDrag:null,layout:c,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(c,h)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:t,cols:s,margin:a,containerPadding:r,rowHeight:o,maxRows:i,useCSSTransforms:l}=this.props;return n.createElement(ma,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minH:1,minW:1,maxH:1/0,maxW:1/0,className:"grid-GridPlaceholder_1MVAj",containerWidth:t,cols:s,margin:a,containerPadding:r||a,maxRows:i,rowHeight:o,isDraggable:!1,isResizable:!1,useCSSTransforms:l},n.createElement("div",null))}processGridItem(e){if(!e||!e.key)return null;const t=ea(this.state.layout,String(e.key));if(!t)return null;const{width:s,cols:a,margin:r,containerPadding:o,rowHeight:i,maxRows:l,isDraggable:c,isResizable:h,useCSSTransforms:p,draggableCancel:d,draggableHandle:u}=this.props,{mounted:m}=this.state,g=Boolean(!t.static&&c&&(t.isDraggable||null==t.isDraggable)),b=Boolean(!t.static&&h&&(t.isResizable||null==t.isResizable));return n.createElement(ma,{containerWidth:s,cols:a,margin:r,containerPadding:o||r,maxRows:l,rowHeight:i,cancel:d,handle:u,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:g,isResizable:b,useCSSTransforms:p&&m,usePercentages:!m,w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minH:t.minH,minW:t.minW,maxH:t.maxH,maxW:t.maxW,static:t.static},n.createElement("div",{className:t.w+"_"+t.h+"_"+t.x+"_"+t.y},e))}render(){const e=oe()("grid-GridLayout_2pMW2",this.props.className),t={height:this.containerHeight()},s=n.Children.map(this.props.children,(e=>this.processGridItem(e)));return n.createElement("div",{className:e,style:t},s,this.placeholder())}}ga.defaultProps={autoSize:!0,cols:12,containerPadding:null,layout:[],verticalCompact:!0,onLayoutChange:ha,onDragStart:ha,onDrag:ha,onDragStop:ha,onResizeStart:ha,onResize:ha,onResizeStop:ha};const ba=()=>{};class Ca extends n.PureComponent{constructor(){super(...arguments),this.state={width:1e3},this.onWindowResize=()=>{const e=Kn.findDOMNode(this);e instanceof HTMLElement&&this.setState({width:e.offsetWidth})},this.handleLayoutChange=e=>{const t=l().clone(this.props.blocks);l().each(e,(e=>{const s=l().find(t,{identifier:e.i});s&&(s.pos=[e.y,e.x],s.size=[e.w,e.h])})),this.props.onChange(t)}}componentDidMount(){window.addEventListener("resize",this.onWindowResize),this.onWindowResize()}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}render(){const{locked:e}=this.props,t=oe()(qn.Wrapper,e&&qn.Locked,!e&&qn.UnLocked),s=ga;return n.createElement(s,{className:t,cols:20,width:this.state.width,autoSize:!0,preventCollision:!1,compactType:"vertical",margin:[5,5],rowHeight:10,maxRows:1/0,useCSSTransforms:!0,onLayoutChange:this.handleLayoutChange,onDragStart:ba,onDrag:ba,onDragStop:ba,onResizeStart:ba,onResize:ba,onResizeStop:ba,isDraggable:!e,isResizable:!e,draggableCancel:".draggableCancel",draggableHandle:".DraggableHandle",layout:this.generateLayout()},this.generateDOM())}generateDOM(){return l().map(this.props.blocks,(e=>n.createElement("div",{className:qn.Block,key:e.identifier},n.createElement(zn,{block:e,locked:this.props.locked}))))}generateLayout(){return l().map(this.props.blocks,(e=>({x:e.pos[1],y:e.pos[0],w:e.size[0],h:e.size[1],i:e.identifier,minW:3,minH:6,maxW:100,maxH:100})))}}class va extends n.PureComponent{constructor(){super(...arguments),this.handleChange=e=>{ne.dispatch(I.updateBoard({blocks:e}))}}render(){const{dashboardState:e}=this.props;return 0==e.board.blocks.length&&!0===e.locked?n.createElement("div",{className:"board-Help_iV1iM"},"You need Unlock board (top right corner) for add first block."):n.createElement("div",null,n.createElement(Ca,{blocks:e.board.blocks,locked:e.locked,onChange:this.handleChange}))}}const fa=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(va);var ya=s(8109),Ea=s(4229);class Sa extends n.PureComponent{constructor(){super(...arguments),this.state={popover:!1,showModal:!1},this.modalClose=()=>{this.setState({showModal:!1})},this.onIsMobileEnabledChange=e=>{this.props.onChange({isMobileEnabled:e}),setTimeout((()=>{this.props.onSave()}),500)},this.duplicateDoard=()=>{const e=this.props.board.identifier,t=p.getDashboardDataProvider().endpoint;window.location.href=t+"api/duplicate?identifier="+e},this.refresh=()=>{const{board:e,onChange:t}=this.props,s=l().cloneDeep(e.blocks);l().each(s,(e=>{e._refresh=J.getUniqueIdentifier()})),t({blocks:s})},this.toggleLock=()=>{this.props.onLock(!this.props.locked)},this.changeModalVisibility=()=>{this.setState({showModal:!this.state.showModal})},this.onAddNewBlock=()=>{ne.dispatch(I.blockLibraryOpen())}}render(){const e=J.getMobileUrl(this.props.board),t="https://api.qrserver.com/v1/create-qr-code/?size=220x220&margin=0&data="+e,s=n.createElement(at.u,{open:!!this.state.showModal,title:"Share Dashboard",onClose:this.modalClose},n.createElement(at.u.Section,null,n.createElement(ot.l,null,n.createElement(st.X,{label:"Enable Remote Access",checked:this.props.board.isMobileEnabled,onChange:this.onIsMobileEnabledChange}),n.createElement(it.z,{open:this.props.board.isMobileEnabled,id:"url"},n.createElement(He.jN,{label:"Access URL",id:"url"},n.createElement(Be.D,{vertical:!0},n.createElement("div",{className:"controls-QrLink_1L9f4"},n.createElement("a",{href:e},e),n.createElement("img",{src:t})))))))),a=this.props.locked?null:n.createElement(Be.D,{spacing:"tight"},n.createElement(Ge.h,{segmented:!0},n.createElement(Ie.z,{onClick:this.onAddNewBlock,size:"slim"},"Add New Widget"),n.createElement(Ie.z,{onClick:this.props.onEdit,size:"slim"},"Edit Board")),n.createElement(Ge.h,{segmented:!0},n.createElement(Ie.z,{onClick:this.props.onSave,disabled:!this.props.changed,size:"slim"},"Save Changes"),n.createElement(Ie.z,{onClick:this.props.onReset,disabled:!this.props.changed,size:"slim"},"Reset Changes")),n.createElement(Ie.z,{onClick:this.refresh,size:"slim"},"Refresh"),n.createElement(Ie.z,{onClick:this.duplicateDoard,size:"slim"},"Duplicate"));return n.createElement(Be.D,{alignment:"center"},a,s,n.createElement(Ie.z,{icon:ya.S,onClick:this.changeModalVisibility},"Share"),n.createElement(Ie.z,{icon:Ea.S,onClick:this.toggleLock,pressed:!this.props.locked,outline:this.props.locked},"Customize"))}}class Da extends n.PureComponent{constructor(){super(...arguments),this.onChangeDateRange=e=>{this.props.onChange(e)}}render(){return n.createElement("div",null,n.createElement(es,{identifier:"DATE",onChange:this.onChangeDateRange,filters:this.props.filters,reportState:null,boardState:this.props.boardState}))}}class ka extends n.PureComponent{constructor(){super(...arguments),this.updateLock=e=>{ne.dispatch(I.updateLock(e))},this.updateBoard=e=>{ne.dispatch(I.updateBoard(e))},this.saveBoard=()=>{const{board:e}=this.props.dashboardState,t=Zs.MessageManager.addMessage("Saving...");(e=>{const t=p.getDashboardDataProvider().endpoint;return new Promise(((s,n)=>{C.post(t+"api/save",{board:e}).then((e=>{!0===e.data.success?s(e.data.message):!1===e.data.success&&n(e.data.message),n(JSON.stringify(e.data))})).catch((e=>{n(JSON.stringify(e))}))}))})(e).then((e=>{Zs.MessageManager.addMessage(e,t),ne.dispatch(I.syncBoard())})).catch((e=>{Zs.MessageManager.addErrorMessage(e,t)}))},this.editBoard=()=>{const{board:e}=this.props.dashboardState;ne.dispatch(I.editBoard(e.identifier))},this.resetBoard=()=>{const{_board:e}=this.props.dashboardState;ne.dispatch(I.updateBoard(e))},this.setFilters=e=>{ne.dispatch(I.setFilters(e))}}render(){const{dashboardState:e}=this.props,t=p.isMobileDashboard()?null:n.createElement(Sa,{board:e.board,locked:e.locked,changed:this.isBoardChanged(),onSave:this.saveBoard,onEdit:this.editBoard,onChange:this.updateBoard,onReset:this.resetBoard,onLock:this.updateLock});return n.createElement(Be.D,{alignment:"center"},this.props.children,n.createElement(Be.D.Item,{fill:!0},n.createElement(Da,{filters:e.filters,onChange:this.setFilters,boardState:e.board})),t)}isBoardChanged(){const{board:e,_board:t}=this.props.dashboardState;return!l().isEqual(t,e)}}const wa=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(ka);class xa extends n.PureComponent{constructor(){super(...arguments),this.state={activeBlock:0},this.onClose=()=>{ne.dispatch(I.blockLibraryClose())},this.setActiveBlock=e=>{this.setState({activeBlock:e})},this.addSelected=()=>{const{size:e,identifier:t,pos:s}=J.getEmtpyBlock(),n=Object.assign(Object.assign({},p.getDashboardDataProvider().library[this.state.activeBlock]),{identifier:t,size:e,pos:s});this.addBlock(n),ne.dispatch(I.blockLibraryClose())},this.addCustom=()=>{this.addBlock(J.getEmtpyBlock()),ne.dispatch(I.blockLibraryClose())},this.addBlock=e=>{const{board:t}=this.props.dashboardState,s=l().clone(t.blocks);s.push(e),ne.dispatch(I.updateBoard({blocks:s}))},this.prepareBlock=e=>{const t=J.getEmtpyBlock();return Object.assign(Object.assign(Object.assign({},t),e),{config:Object.assign(Object.assign({},t.config),e.config)})}}render(){const e={content:"Add Empty Widget",onClick:this.addCustom},t=[{content:"Cancel",onAction:this.onClose}],s=p.getDashboardDataProvider().library,a=l().map(s,((e,t)=>{const s=oe()("BlockLibrary-Item_1igtO",this.state.activeBlock===t&&"BlockLibrary-Active_2w8l1");return n.createElement("div",{className:s,key:t,onClick:this.setActiveBlock.bind(this,t)},e.title)})),r=this.prepareBlock(s[this.state.activeBlock]),o=n.createElement(zn,{block:r,locked:!0});return n.createElement(at.u,{open:this.props.dashboardState.blockLibrary,title:"Widget Library",onClose:this.onClose,primaryAction:e,secondaryActions:t,large:!0},n.createElement("div",{className:"BlockLibrary-Container_3j7Mu"},n.createElement(Ye.R,{className:"BlockLibrary-Selector_3xzEZ",vertical:!0,shadow:!0},a),n.createElement(Ye.R,{className:"BlockLibrary-Preview_21-Ef"},n.createElement("div",{className:"BlockLibrary-PreviewInner_K95K2"},o),n.createElement(Ie.z,{onClick:this.addSelected,primary:!0},"Add Widget"))))}}const Ma=(0,r.$j)((e=>({dashboardState:e.dashboardState})))(xa);class Ra extends n.PureComponent{constructor(){super(...arguments),this.state={time:Date.now()},this.onDismiss=e=>{e.time=0}}componentDidMount(){setInterval((()=>{this.setState({time:Date.now()})}),1e3)}render(){const e=this.props.messages.map((e=>e.time+e.duration<=this.state.time?null:n.createElement(dt.F,{key:e.id,onDismiss:this.onDismiss.bind(this,e),content:e.content,error:"error"===e.type})));return n.createElement("div",null,e)}}class za extends n.Component{constructor(){super(...arguments),this.renderApp=()=>{let e;return e=p.getDashboardDataProvider().endpoint?n.createElement(Cn,null):this.props.builderState.active?n.createElement(cn,null):n.createElement(mt,null),n.createElement("div",{className:"root-Root_1N8j6"},n.createElement("div",{className:"root-ContentArea_21hJx"},n.createElement("div",{className:"root-Content_1-IQQ"},e)),n.createElement(Ra,{messages:this.props.mainState.messages}))}}render(){return this.renderApp()}}const Pa=(0,r.$j)((e=>({mainState:e.mainState,builderState:e.builderState})))(za);var ja=s(6901),Ta=s(1886),Oa=s(4443),Aa=s(1994);const La=()=>n.createElement(r.zt,{store:ne},n.createElement(ja.w,{i18n:Aa},n.createElement(Ta.R,null,n.createElement(Oa.T,{fullWidth:!0},n.createElement(Pa,null)))));!function(){const e=document.getElementById("root");(0,a.s)(e).render(n.createElement(La,null))}()},4654:()=>{}},s={};function n(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,e=[],n.O=(t,s,a,r)=>{if(!s){var o=1/0;for(h=0;h<e.length;h++){for(var[s,a,r]=e[h],i=!0,l=0;l<s.length;l++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(h--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[s,a,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[o,i,l]=s,c=0;if(o.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var h=l(n)}for(t&&t(s);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[o[c]]=0;return n.O(h)},s=self.webpackChunkapp=self.webpackChunkapp||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=n.O(void 0,[736],(()=>n(3254)));a=n.O(a)})();